<!DOCTYPE html>
<html lang="fr-FR">

<head>
    
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,minimum-scale=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320"><meta property="og:title" content="Making Of &#39;CSS is Awesome !&#39;">
<meta property="og:description" content="Introduction
Depuis quelque temps, j&#39;avais l&#39;idée de faire une présentation sur le CSS, mon objectif était de redorer le blason de cette technologie souvent crainte et sous-estimée par de trop nombreux développeurs. J&#39;ai profité du CFP de DevoxxFR pour me jeter à l&#39;eau.
En plus de mon appétance pour la transmission, j&#39;aime bien faire des talks car ça me pousse à aller plus loin sur le sujet que je présente. Pour celle-ci, je me suis donné comme défi de faire la présentation en HTML/CSS sans JavaScript dans les slides. Cet article présente donc le résultat de ce défi.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://www.monkeypatch.io/blog/2017/2017-05-02-makingof_css_is_awesome/">
<meta property="og:image" content="https://www.monkeypatch.io/public/images/logos/logo-mkp-blue-x256.png">
<meta property="article:published_time" content="2017-05-02T00:00:00+00:00">
<meta property="article:modified_time" content="2017-05-02T00:00:00+00:00"><meta property="og:site_name" content="MonkeyPatch">
<meta itemprop="name" content="Making Of &#39;CSS is Awesome !&#39;">
<meta itemprop="description" content="Introduction
Depuis quelque temps, j&#39;avais l&#39;idée de faire une présentation sur le CSS, mon objectif était de redorer le blason de cette technologie souvent crainte et sous-estimée par de trop nombreux développeurs. J&#39;ai profité du CFP de DevoxxFR pour me jeter à l&#39;eau.
En plus de mon appétance pour la transmission, j&#39;aime bien faire des talks car ça me pousse à aller plus loin sur le sujet que je présente. Pour celle-ci, je me suis donné comme défi de faire la présentation en HTML/CSS sans JavaScript dans les slides. Cet article présente donc le résultat de ce défi.">
<meta itemprop="datePublished" content="2017-05-02T00:00:00&#43;00:00">
<meta itemprop="dateModified" content="2017-05-02T00:00:00&#43;00:00">
<meta itemprop="wordCount" content="2284">
<meta itemprop="image" content="https://www.monkeypatch.io/public/images/logos/logo-mkp-blue-x256.png">



<meta itemprop="keywords" content="CSS,Devoxx,MiXiT,NodeJS,TypeScript,"><meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://www.monkeypatch.io/public/images/logos/logo-mkp-blue-x256.png">

<meta name="twitter:title" content="Making Of &#39;CSS is Awesome !&#39;">
<meta name="twitter:description" content="Introduction
Depuis quelque temps, j&#39;avais l&#39;idée de faire une présentation sur le CSS, mon objectif était de redorer le blason de cette technologie souvent crainte et sous-estimée par de trop nombreux développeurs. J&#39;ai profité du CFP de DevoxxFR pour me jeter à l&#39;eau.
En plus de mon appétance pour la transmission, j&#39;aime bien faire des talks car ça me pousse à aller plus loin sur le sujet que je présente. Pour celle-ci, je me suis donné comme défi de faire la présentation en HTML/CSS sans JavaScript dans les slides. Cet article présente donc le résultat de ce défi.">
<meta name="generator" content="Hugo 0.62.2">

<meta name="ROBOTS" content="INDEX, FOLLOW">

<title>MonkeyPatch  | Making Of &#39;CSS is Awesome !&#39;</title>


<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">






<link rel="stylesheet" href="https://www.monkeypatch.io/styles/main.a68dfcbd8dbd108ff1ac179c3b5bf75cb5e14ea51ecd4dc44439034e6c03eeef.css">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">

<link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
    
    
    
    

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/themes/prism-tomorrow.min.css" integrity="sha256-4S9ufRr1EqaUFFeM9/52GH68Hs1Sbvx8eFXBWpl8zPI=" crossorigin="anonymous">

</head>

<body class="page blog blog20172017-05-02-makingof_css_is_awesome">

    
    <header>
    
    <div class="menu">
        <div class="logo">
            <a href="https://www.monkeypatch.io/">
                <img alt="Monkey Patch" src="/images/logos/logo-monkey.svg">
            </a>
        </div>

        <nav class="lang">
            <ul>
                
                <li class="active">
                    <a href="https://www.monkeypatch.io/">FR</a>
                </li>
                
                <li class="">
                    <a href="https://www.monkeypatch.io/en/">FR</a>
                </li>
                
            </ul>
        </nav>

        <nav class="menu">
            <ul>
                
                <li class="">
                    <a href="https://www.monkeypatch.io/expert/">Notre Expertise</a>
                </li>
                
                <li class="">
                    <a href="https://www.monkeypatch.io/about/">Notre Philo</a>
                </li>
                
                <li class="">
                    <a href="https://www.monkeypatch.io/careers/">Être Monkeys</a>
                </li>
                
                <li class="">
                    <a href="https://www.monkeypatch.io/jobs/">Nos Jobs</a>
                </li>
                
                <li class="">
                    <a href="https://www.monkeypatch.io/contact/">Contact</a>
                </li>
                
                <li class="">
                    <a href="https://www.monkeypatch.io/blog/">Blog</a>
                </li>
                
            </ul>
        </nav>

        <nav class="hamburger">
            <label for="menu-hamburger">
                <i class="fa fa-bars" aria-hidden="true"></i>
            </label>
        </nav>

    </div>
    <input type="checkbox" id="menu-hamburger">
    <nav class="menu-hamburger">
        <ul>
            
            <li class="">
                <a href="https://www.monkeypatch.io/expert/">Notre Expertise</a>
            </li>
            
            <li class="">
                <a href="https://www.monkeypatch.io/about/">Notre Philo</a>
            </li>
            
            <li class="">
                <a href="https://www.monkeypatch.io/careers/">Être Monkeys</a>
            </li>
            
            <li class="">
                <a href="https://www.monkeypatch.io/jobs/">Nos Jobs</a>
            </li>
            
            <li class="">
                <a href="https://www.monkeypatch.io/contact/">Contact</a>
            </li>
            
            <li class="">
                <a href="https://www.monkeypatch.io/blog/">Blog</a>
            </li>
            
        </ul>
        <ul class="lang">
            
            <li class="active">
                <a href="https://www.monkeypatch.io/">FR</a>
            </li>
            
            <li class="">
                <a href="https://www.monkeypatch.io/en/">FR</a>
            </li>
            
        </ul>
    </nav>
</header>
    

    <main>
        <a id="top"></a>
        

<nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#comment-afficher-et-animer-les-slides-">Comment afficher et animer les slides ?</a>
      <ul>
        <li><a href="#structure-de-base">Structure de base</a></li>
        <li><a href="#comment-animer-les-slides-">Comment animer les slides ?</a></li>
        <li><a href="#comment-changer-de-slides-">Comment changer de slides ?</a></li>
        <li><a href="#bonus--numéro-du-slide">Bonus : Numéro du slide</a></li>
        <li><a href="#bonus--navigation-rapide">Bonus : navigation rapide</a></li>
      </ul>
    </li>
    <li><a href="#comment-faire-du-live-edit-de-css-">Comment faire du live edit de CSS ?</a></li>
    <li><a href="#produire-du-pdf">Produire du PDF</a></li>
    <li><a href="#build-system">Build system</a>
      <ul>
        <li><a href="#nodejs-et-tooling">NodeJS et Tooling</a></li>
        <li><a href="#les-slides">Les Slides</a></li>
        <li><a href="#styles">Styles</a></li>
        <li><a href="#serveur-et-serveur-de-développement">Serveur et serveur de développement</a></li>
        <li><a href="#comment-publier-dans-les-github-pages-">Comment publier dans les Github Pages ?</a></li>
      </ul>
    </li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav>

<section class="post">
    <a id="top" name="top"></a>
    <h1>
        <span>Making Of 'CSS is Awesome !'</span>
        <div class="share">
            <a class="twitter-share-button" href="https://twitter.com/share" data-size="large" data-via="monkeypatch_io" data-text="Making Of &#39;CSS is Awesome !&#39;" data-hashtags="CSS,Devoxx,MiXiT,NodeJS,TypeScript">Tweet</a>

        </div>
    </h1>

    <span class="date">
    2
    mai
    2017
</span>

    <div class="tags">
        
        <span>CSS</span>
        
        <span>Devoxx</span>
        
        <span>MiXiT</span>
        
        <span>NodeJS</span>
        
        <span>TypeScript</span>
        
    </div>

    <article><h2 id="introduction">Introduction</h2>
<p>Depuis quelque temps, j'avais l'idée de faire une présentation sur le CSS, mon objectif était de redorer le blason de cette technologie souvent crainte et sous-estimée par de trop nombreux développeurs. J'ai profité du CFP de DevoxxFR pour me jeter à l'eau.
En plus de mon appétance pour la transmission, j'aime bien faire des talks car ça me pousse à aller plus loin sur le sujet que je présente. Pour celle-ci, je me suis donné comme défi de faire la présentation en HTML/CSS sans JavaScript dans les slides. Cet article présente donc le résultat de ce défi.</p>
<p>J'ai fait cette présentation à DevoxxFR, une version plus longue à MiXiT, puis enfin au DevFest Toulouse.</p>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/fPObs60585w" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<p>Bien sûr, faire des présentations en HTML/CSS/JS n'est pas nouveau, certains sont trés bien faits comme :</p>
<ul>
<li><a href="http://lab.hakim.se/reveal-js/#/">reveal.js</a></li>
<li><a href="http://markdalgleish.com/projects/bespoke.js/">bespoke.js</a></li>
<li><a href="https://shwr.me/">Showr</a></li>
<li><a href="https://leaverou.github.io/csss/#intro">CSSS</a></li>
</ul>
<p>J'avais déjà, dans le cadre d'une autre présentation, écrit mon propre framework en utilisant du CoffeeScript: <a href="https://github.com/ilaborie/prez">Prez</a>.</p>
<p>Pourquoi en écrire un nouveau, qui sera moins bien que ceux qui sont portés depuis plusieurs années ? La raison principale est que cela me permet de sortir de ma &lsquo;zone de confort&rsquo;, ce qui est toujours très enrichissant. En plus de cet aspect, cela me permet de creuser des sujets que je n'ai pas encore eu l'occasion d'étudier comme les &lsquo;Custom Properties de CSS 4&rsquo; (aka les variables), et puis c'est fun.</p>
<blockquote>
<p>Attention lors d'une présentation on peut (du moins on espère) contrôler l'environnement: navigateur, résolution, &hellip; Quand j'ai réalisé cette application je suis parti sur <a href="https://www.google.fr/chrome/browser/canary.html">Chrome Canary</a>, et j'ai constaté qu'il y avait des ralentissements sur les autres navigateurs quand j'utilisais les <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_variables">Custom Properties</a> :'(
A suivre&hellip;</p>
</blockquote>
<p><em>Le code que je décris ici est disponible dans <a href="https://github.com/ilaborie/css-awesome">Github</a>. À ce jour, il n'est pas destiné à devenir un nouveau framework. Il faudrait faire pas mal de ménage avant de pouvoir en faire quelque chose d'intéressant.</em></p>
<h2 id="comment-afficher-et-animer-les-slides-">Comment afficher et animer les slides ?</h2>
<h3 id="structure-de-base">Structure de base</h3>
<p>En gros voici la base de code HTML pour les slides :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">html</span>&gt;
  &lt;<span style="color:#f92672">head</span>&gt;<span style="color:#75715e">&lt;!--</span><span style="color:#75715e"> ... </span><span style="color:#75715e">--&gt;</span>&lt;/<span style="color:#f92672">head</span>&gt;
  &lt;<span style="color:#f92672">body</span>&gt;
    &lt;<span style="color:#f92672">main</span>&gt;
      &lt;<span style="color:#f92672">section</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;cover&#34;</span>&gt;<span style="color:#75715e">&lt;!--</span><span style="color:#75715e"> ... </span><span style="color:#75715e">--&gt;</span>&lt;/<span style="color:#f92672">section</span>&gt;
      &lt;<span style="color:#f92672">section</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;slide1&#34;</span>&gt;<span style="color:#75715e">&lt;!--</span><span style="color:#75715e"> ... </span><span style="color:#75715e">--&gt;</span>&lt;/<span style="color:#f92672">section</span>&gt;
      &lt;<span style="color:#f92672">section</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;slide2&#34;</span>&gt;<span style="color:#75715e">&lt;!--</span><span style="color:#75715e"> ... </span><span style="color:#75715e">--&gt;</span>&lt;/<span style="color:#f92672">section</span>&gt;
      &lt;<span style="color:#f92672">section</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;slide3&#34;</span>&gt;<span style="color:#75715e">&lt;!--</span><span style="color:#75715e"> ... </span><span style="color:#75715e">--&gt;</span>&lt;/<span style="color:#f92672">section</span>&gt;
      &lt;<span style="color:#f92672">section</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;end&#34;</span>&gt;<span style="color:#75715e">&lt;!--</span><span style="color:#75715e"> ... </span><span style="color:#75715e">--&gt;</span>&lt;/<span style="color:#f92672">section</span>&gt;
    &lt;/<span style="color:#f92672">main</span>&gt;
  &lt;/<span style="color:#f92672">body</span>&gt;
&lt;/<span style="color:#f92672">html</span>&gt;
</code></pre></div><p>Chaque slide correspond à une <code>&lt;section&gt;</code>, pour faire simple on va donner la taille voulu pour chaque slide :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="color:#f92672">section</span> {
  <span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">100</span><span style="color:#66d9ef">vw</span>;  <span style="color:#75715e">/* largeur maximun sans scroll */</span>
  <span style="color:#66d9ef">height</span>: <span style="color:#ae81ff">100</span><span style="color:#66d9ef">vh</span>; <span style="color:#75715e">/* hauteur maximun sans scroll */</span>
}
</code></pre></div><blockquote>
<p>on peut utiliser l'unité <code>vmin</code> pour forcer un slide en 4/3 ou en 16/10 en mettant la largeur à <code>100vmin</code>, et la hauteur à <code>75vmin</code> pour le 4/3 ou <code>62.5vmin</code> pour le 16/10. On utilisera bien sur <code>flexbox</code> pour le centrage dans cette situation.</p>
</blockquote>
<h3 id="comment-animer-les-slides-">Comment animer les slides ?</h3>
<p>Le principe de navigation est le suivant :</p>
<ul>
<li>les slides sont décalés sur la gauche avec <code>transform: translateX(-100vmax);</code> par défaut,</li>
<li>le slide courant est remis dans l'axe avec <code>transform: translateX(0);</code>,</li>
<li>les slides suivants sont décalés à droites dans l'axe avec <code>transform: translateX(100vmax);</code></li>
</ul>
<p>Une solution très simple pour identifier le slide courant c'est d'utiliser la pseudo classe <code>:target</code>. Le slide avec l'id <code>XXX</code> sera ciblé lorsque l'URL de notre navigateur sera du type <code>http://&lt;maprez&gt;/&lt;mapage&gt;.html#XXX</code>.</p>
<p>Ce qui ce traduit par le CSS suivant :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="color:#f92672">section</span> {
 <span style="color:#66d9ef">transform</span>: translateX(<span style="color:#ae81ff">-100</span><span style="color:#66d9ef">vmax</span>);
}
<span style="color:#f92672">section</span>:<span style="color:#a6e22e">target</span> { <span style="color:#960050;background-color:#1e0010">/</span><span style="color:#960050;background-color:#1e0010">/</span> <span style="color:#960050;background-color:#1e0010">p</span><span style="color:#960050;background-color:#1e0010">s</span><span style="color:#960050;background-color:#1e0010">e</span><span style="color:#960050;background-color:#1e0010">u</span><span style="color:#960050;background-color:#1e0010">d</span><span style="color:#960050;background-color:#1e0010">o</span> classe :target 
 <span style="color:#66d9ef">transform</span><span style="color:#f92672">:</span> translateX(<span style="color:#ae81ff">0</span>);
}
<span style="color:#f92672">section</span> <span style="color:#f92672">~</span> <span style="color:#f92672">section</span> { <span style="color:#960050;background-color:#1e0010">/</span><span style="color:#960050;background-color:#1e0010">/</span> <span style="color:#960050;background-color:#1e0010">s</span><span style="color:#960050;background-color:#1e0010">e</span><span style="color:#960050;background-color:#1e0010">l</span><span style="color:#960050;background-color:#1e0010">e</span><span style="color:#960050;background-color:#1e0010">c</span><span style="color:#960050;background-color:#1e0010">t</span><span style="color:#960050;background-color:#1e0010">e</span><span style="color:#960050;background-color:#1e0010">u</span><span style="color:#960050;background-color:#1e0010">r</span> <span style="color:#960050;background-color:#1e0010">~</span> 
  <span style="color:#66d9ef">transform</span>: translateX(<span style="color:#ae81ff">-100</span><span style="color:#66d9ef">vmax</span>);
}
</code></pre></div><p>Et bien sûr, on ajoute une petite transition comme <code>transition: transform .8s ease-in-out;</code>.</p>
<p>Pour ceux qui on encore du mal avec les selecteurs CSS, le <code>~</code> c'est le selecteur des <em>siblings</em>. Voir <a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/Introduction_to_CSS/Simple_selectors#Combinators">Simple selectors - Combinators</a></p>
<h3 id="comment-changer-de-slides-">Comment changer de slides ?</h3>
<p>Pour cela il suffit d'un lien qui va sur le slide avec l'id qui correspond au slide souhaité.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">main</span>&gt;
  &lt;<span style="color:#f92672">section</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;cover&#34;</span>&gt;
    <span style="color:#75715e">&lt;!--</span><span style="color:#75715e"> ... </span><span style="color:#75715e">--&gt;</span>
    &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;next&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#slide1&#34;</span>&gt;&lt;/<span style="color:#f92672">a</span>&gt;
  &lt;/<span style="color:#f92672">section</span>&gt;
  &lt;<span style="color:#f92672">section</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;slide1&#34;</span>&gt;
    &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;previous&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#cover&#34;</span>&gt;&lt;/<span style="color:#f92672">a</span>&gt;
    <span style="color:#75715e">&lt;!--</span><span style="color:#75715e"> ... </span><span style="color:#75715e">--&gt;</span>
    &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;next&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#slide2&#34;</span>&gt;&lt;/<span style="color:#f92672">a</span>&gt;
  &lt;/<span style="color:#f92672">section</span>&gt;
  &lt;<span style="color:#f92672">section</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;slide2&#34;</span>&gt;
    &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;previous&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#slide1&#34;</span>&gt;&lt;/<span style="color:#f92672">a</span>&gt;
    <span style="color:#75715e">&lt;!--</span><span style="color:#75715e"> ... </span><span style="color:#75715e">--&gt;</span>
    &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;next&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#slide3&#34;</span>&gt;&lt;/<span style="color:#f92672">a</span>&gt;
  &lt;/<span style="color:#f92672">section</span>&gt;
  &lt;<span style="color:#f92672">section</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;slide3&#34;</span>&gt;
    &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;previous&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#slide2&#34;</span>&gt;&lt;/<span style="color:#f92672">a</span>&gt;
    <span style="color:#75715e">&lt;!--</span><span style="color:#75715e"> ... </span><span style="color:#75715e">--&gt;</span>
    &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;next&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#end&#34;</span>&gt;&lt;/<span style="color:#f92672">a</span>&gt;
  &lt;/<span style="color:#f92672">section</span>&gt;
  &lt;<span style="color:#f92672">section</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;end&#34;</span>&gt;
    &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;previous&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#slide3&#34;</span>&gt;&lt;/<span style="color:#f92672">a</span>&gt;
    <span style="color:#75715e">&lt;!--</span><span style="color:#75715e"> ... </span><span style="color:#75715e">--&gt;</span>
  &lt;/<span style="color:#f92672">section</span>&gt;
&lt;/<span style="color:#f92672">main</span>&gt;
</code></pre></div><p>Ensuite on peut passer au CSS pour rendre ça sympa :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="color:#f92672">section</span> <span style="color:#f92672">a</span>.<span style="color:#a6e22e">previous</span><span style="color:#f92672">,</span> <span style="color:#f92672">section</span> <span style="color:#f92672">a</span>.<span style="color:#a6e22e">next</span> {
  <span style="color:#66d9ef">position</span>: <span style="color:#66d9ef">fixed</span>;
  <span style="color:#66d9ef">top</span>: <span style="color:#ae81ff">0</span>;
  <span style="color:#66d9ef">width</span>: <span style="color:#ae81ff">5</span><span style="color:#66d9ef">vw</span>;
  <span style="color:#66d9ef">height</span>: <span style="color:#ae81ff">100</span><span style="color:#66d9ef">vh</span>;
  <span style="color:#66d9ef">font-size</span>: <span style="color:#ae81ff">25</span><span style="color:#66d9ef">vh</span>;
  <span style="color:#66d9ef">color</span>: <span style="color:#ae81ff">#000</span>;
  <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">flex</span>;
  <span style="color:#66d9ef">align-items</span>: <span style="color:#66d9ef">center</span>;
  <span style="color:#66d9ef">text-decoration</span>: <span style="color:#66d9ef">none</span>;
}
<span style="color:#f92672">section</span> <span style="color:#f92672">a</span>.<span style="color:#a6e22e">previous</span> {
  <span style="color:#66d9ef">left</span>: <span style="color:#ae81ff">0</span>;
}
<span style="color:#f92672">section</span> <span style="color:#f92672">a</span>.<span style="color:#a6e22e">previous</span>::<span style="color:#a6e22e">before</span> {
  <span style="color:#66d9ef">content</span>: <span style="color:#e6db74">&#39;&lt;&#39;</span>;
}
<span style="color:#f92672">section</span> <span style="color:#f92672">a</span>.<span style="color:#a6e22e">next</span> {
  <span style="color:#66d9ef">left</span>: <span style="color:#ae81ff">95</span><span style="color:#66d9ef">vw</span>;
}
<span style="color:#f92672">section</span> <span style="color:#f92672">a</span>.<span style="color:#a6e22e">next</span>::<span style="color:#a6e22e">before</span> {
  <span style="color:#66d9ef">content</span>: <span style="color:#e6db74">&#39;&gt;&#39;</span>;
}
</code></pre></div>


 

<script data-slug-hash="wJbogy" data-user="ilaborie" data-height="500" data-default-tab="result" data-theme-id="8862" class="codepen" async src="//codepen.io/assets/embed/ei.js"></script>
<blockquote>
<p>Il y a d'autres solutions alternatives pour faire un système de slides, comme un mécanisme avec des &ldquo;radio boutons&rdquo; et le <code>:checked</code> pour remplacer le <code>:target</code>, ou bien laisser le scroll horizontal, et ne pas faire de translation.</p>
</blockquote>
<h3 id="bonus--numéro-du-slide">Bonus : Numéro du slide</h3>
<p>Pour ajouter une numéroration sur chaque slide, on peut utiliser un pseudo-élément sur les <code>&lt;section&gt;</code>, avec un positionnement relatif. C'est l'occasion d'utiliser les <a href="https://developer.mozilla.org/fr/docs/Web/CSS/Compteurs_CSS">compteurs CSS</a> :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="color:#f92672">section</span>::<span style="color:#a6e22e">after</span> {
  <span style="color:#66d9ef">counter-increment</span>: section;
  <span style="color:#66d9ef">content</span>: <span style="color:#e6db74">&#39;# &#39;</span> counter(section);
}
</code></pre></div><p>Il nous reste ensuite le <code>::before</code> pour afficher une barre avec les logos, les hashtags, &hellip;</p>
<h3 id="bonus--navigation-rapide">Bonus : navigation rapide</h3>
<p>Pour naviguer rapidement entre les slides, on peut simplement créer une barre de navigation que l'on peut fixer en bas ou en haut.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">nav</span>&gt;
  &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#cover&#34;</span>&gt;&lt;/<span style="color:#f92672">a</span>&gt;
  &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#slide1&#34;</span>&gt;&lt;/<span style="color:#f92672">a</span>&gt;
  &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#slide2&#34;</span>&gt;&lt;/<span style="color:#f92672">a</span>&gt;
  &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#slide3&#34;</span>&gt;&lt;/<span style="color:#f92672">a</span>&gt;
  &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#end&#34;</span>&gt;&lt;/<span style="color:#f92672">a</span>&gt;
&lt;/<span style="color:#f92672">nav</span>&gt;
</code></pre></div>


 

<script data-slug-hash="ZeNKWw" data-user="ilaborie" data-height="500" data-default-tab="result" data-theme-id="8862" class="codepen" async src="//codepen.io/assets/embed/ei.js"></script>
<h2 id="comment-faire-du-live-edit-de-css-">Comment faire du live edit de CSS ?</h2>
<p>C'est la partie la plus &lsquo;Hack&rsquo; du système, surtout ne pas utiliser ce principe dans du code qui peut aller en production.</p>
<p>Pour cela, on utilise la balise <code>&lt;style&gt;</code> avec l'attribut <code>contenteditable</code>, et ensuite il faut bricoler le style pour rendre ça visible.</p>



 

<script data-slug-hash="BWgBeV" data-user="ilaborie" data-height="500" data-default-tab="result" data-theme-id="8862" class="codepen" async src="//codepen.io/assets/embed/ei.js"></script>
<blockquote>
<p>Notez qu'il est préférable de faire du <a href="https://developer.mozilla.org/fr/docs/Web/API/Document/designMode">designMode</a> plutôt que du <code>contenteditable</code>. Mais cela nécessitait d'avoir du JavaScript, et mon objectif était de ne pas en faire.</p>
</blockquote>
<h2 id="produire-du-pdf">Produire du PDF</h2>
<p>Les slides en HTML c'est bien, mais on est parfois obliger de produire un PDF correspondant. Pour cela, j'ai créé une présentation spécialisée avec un CSS pour le <code>media print</code>. Ensuite on peut passer par la boite de l'impression pour générer un PDF correspondant.
Attention si vous ne prévoyez pas cette fonctionnalité assez tôt vous risquez de passer beaucoup de temps pour mettre au point un look raisonnable. Chrome. La prochaine fois je ferai plus attention&hellip;</p>
<p>Enfin le souci qu'il reste c'est que le live-edit ça rends pas terrible sur du PDF&hellip;</p>
<h2 id="build-system">Build system</h2>
<p>Ce mécanisme de slide a un gros défaut, il faut systématiquement ajouter les liens before/next sur chaque slide, et penser à maintenir les identifiants. Cela peut devenir vraiement lourd lorsqu'on ajoute/supprime/déplace un slide.</p>
<p>Et puis il faut quand même trouver un endroit pour faire du TypeScript et du NodeJS&hellip;
Donc, l'idée est de construire automatiquement le fichier HTML en aggrégeant des fichiers qui correspondent à chaque slide.</p>
<h3 id="nodejs-et-tooling">NodeJS et Tooling</h3>
<p>Pour le mécanisme de construction, on va devoir faire des opérations sur les fichiers et répertoires, pour cela j'utilise <code>mkdirp</code> pour faire l'équivalent du <code>mkdir -p</code> et <code>rimraf</code> pour <code>rm -rf</code> tout en étant compatible avec les plateformes qui ne supportent pas (encore) ces commandes.</p>
<p>Pour le reste des opérations, on va utiliser les modules <code>fs</code> et <code>path</code> de NodeJS pour les autres opérations sur le file system. J'ai choisi de &lsquo;promisifier&rsquo; ces API, mais on aurait aussi pu utiliser <a href="http://bluebirdjs.com/docs/getting-started.html">bluebird</a>.</p>
<p>Voici un exemple avec <code>readFile</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">readFile</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">file</span>, <span style="color:#a6e22e">encoding</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;utf8&#39;</span>)<span style="color:#f92672">:</span> <span style="color:#a6e22e">Promise</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">string</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span>
  <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Promise</span>((<span style="color:#a6e22e">resolve</span>, <span style="color:#a6e22e">reject</span>) <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span>
      <span style="color:#a6e22e">fs</span>.<span style="color:#a6e22e">readFile</span>(<span style="color:#a6e22e">file</span>, <span style="color:#a6e22e">encoding</span>, (<span style="color:#a6e22e">err</span>, <span style="color:#a6e22e">data</span>) <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">reject</span>(<span style="color:#a6e22e">err</span>) <span style="color:#f92672">:</span> <span style="color:#a6e22e">resolve</span>(<span style="color:#a6e22e">data</span>)));
</code></pre></div><p>Pour le templating, il existe déjà plein de solutions en JavaScript, dans ce cas j'ai utilisé la solution basique : le templating de ES6. Par exemple, pour construire ma page, j'utilise le code suivant :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">html</span> <span style="color:#f92672">=</span> ({<span style="color:#a6e22e">body</span>, <span style="color:#a6e22e">slides</span>, <span style="color:#a6e22e">title</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;A Title&#39;</span>, <span style="color:#a6e22e">key</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;index&#39;</span>})<span style="color:#f92672">:</span> <span style="color:#66d9ef">string</span> <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> {
    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">nav</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">slides</span>.<span style="color:#a6e22e">map</span>((<span style="color:#a6e22e">slide</span>, <span style="color:#a6e22e">index</span>) <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">&lt;a href=&#34;#</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">slide</span>.<span style="color:#a6e22e">id</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&#34; title=&#34;</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">slide</span>.<span style="color:#a6e22e">id</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;&gt;</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">index</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&lt;/a&gt;</span><span style="color:#e6db74">`</span>);
    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">&lt;!doctype html&gt;
</span><span style="color:#e6db74">&lt;html lang=&#34;en&#34;&gt;
</span><span style="color:#e6db74">&lt;head&gt;
</span><span style="color:#e6db74">    &lt;meta charset=&#34;UTF-8&#34;&gt;
</span><span style="color:#e6db74">    &lt;meta name=&#34;viewport&#34;
</span><span style="color:#e6db74">          content=&#34;width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0&#34;&gt;
</span><span style="color:#e6db74">    &lt;meta http-equiv=&#34;X-UA-Compatible&#34; content=&#34;ie=edge&#34;&gt;
</span><span style="color:#e6db74">    &lt;title&gt;</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">title</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&lt;/title&gt;
</span><span style="color:#e6db74">    &lt;link href=&#34;https://fonts.googleapis.com/icon?family=Material+Icons&#34; rel=&#34;stylesheet&#34;&gt;
</span><span style="color:#e6db74">    &lt;link rel=&#34;stylesheet&#34; href=&#34;index.css&#34;&gt;
</span><span style="color:#e6db74">&lt;/head&gt;
</span><span style="color:#e6db74">&lt;body class=&#34;</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">key</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;&gt;
</span><span style="color:#e6db74">    &lt;div class=&#34;slides-nav&#34;&gt;&lt;nav&gt;</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">nav</span>.<span style="color:#a6e22e">join</span>(<span style="color:#e6db74">&#39;\n&#39;</span>)<span style="color:#e6db74">}</span><span style="color:#e6db74">&lt;/nav&gt;&lt;/div&gt;
</span><span style="color:#e6db74">    &lt;main&gt;
</span><span style="color:#e6db74">        </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">body</span><span style="color:#e6db74">}</span><span style="color:#e6db74">
</span><span style="color:#e6db74">    &lt;/main&gt;
</span><span style="color:#e6db74">&lt;/body&gt;
</span><span style="color:#e6db74">&lt;/html&gt;</span><span style="color:#e6db74">`</span>
};
</code></pre></div><p>Enfin, on peut tout brancher pour obtenir un code comme celui ci :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">buildHtml</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">slidesDir</span>, <span style="color:#a6e22e">title</span>, <span style="color:#a6e22e">key</span>, <span style="color:#a6e22e">output</span>) <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span>
    <span style="color:#a6e22e">Promise</span>.<span style="color:#a6e22e">resolve</span>(<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;- Building HTML ...&#39;</span>))
        .<span style="color:#a6e22e">then</span>(() <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">slides</span>(<span style="color:#a6e22e">slidesDir</span>, <span style="color:#a6e22e">key</span>)) <span style="color:#75715e">// récuère la liste des slides
</span><span style="color:#75715e"></span>        .<span style="color:#a6e22e">then</span>((<span style="color:#a6e22e">slides</span>: <span style="color:#66d9ef">Slide</span>[]) <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> ({<span style="color:#a6e22e">slides</span>, <span style="color:#a6e22e">contents</span>: <span style="color:#66d9ef">slides.map</span>(<span style="color:#a6e22e">slide</span>)})) <span style="color:#75715e">// construction du contenu
</span><span style="color:#75715e"></span>        .<span style="color:#a6e22e">then</span>(({<span style="color:#a6e22e">slides</span>, <span style="color:#a6e22e">contents</span>}) <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> ({<span style="color:#a6e22e">slides</span>, <span style="color:#a6e22e">body</span>: <span style="color:#66d9ef">contents.join</span>(<span style="color:#a6e22e">sep</span>)})) <span style="color:#75715e">// aggreation
</span><span style="color:#75715e"></span>        .<span style="color:#a6e22e">then</span>(({<span style="color:#a6e22e">slides</span>, <span style="color:#a6e22e">body</span>}) <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">html</span>({<span style="color:#a6e22e">body</span>, <span style="color:#a6e22e">slides</span>, <span style="color:#a6e22e">title</span>, <span style="color:#a6e22e">key</span>})) <span style="color:#75715e">// construction du HTML
</span><span style="color:#75715e"></span>        .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">data</span> <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">writeFile</span>(<span style="color:#a6e22e">output</span>, <span style="color:#a6e22e">data</span>)) <span style="color:#75715e">// on écrit
</span><span style="color:#75715e"></span>        .<span style="color:#a6e22e">then</span>(() <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">log</span>(<span style="color:#e6db74">`</span><span style="color:#e6db74">✅ Write HTML </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">output</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>)) <span style="color:#75715e">// Emoji rocks
</span><span style="color:#75715e"></span>        .<span style="color:#66d9ef">catch</span>(<span style="color:#a6e22e">err</span> <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">error</span>(<span style="color:#e6db74">`</span><span style="color:#e6db74">️FAIL building HTML: </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">err</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>)); <span style="color:#75715e">// Oops
</span></code></pre></div><p>À noter que depuis ES6 (ES2015), on peut utiliser la déconstruction, ce qui permet de faire des trucs sympas comme :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">({<span style="color:#a6e22e">slides</span>, <span style="color:#a6e22e">contents</span>}) =&gt; ({<span style="color:#a6e22e">slides</span>, <span style="color:#a6e22e">body</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">contents</span>.<span style="color:#a6e22e">join</span>(<span style="color:#a6e22e">sep</span>)})
</code></pre></div><p>qui est équivalent au code suivant :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">(<span style="color:#a6e22e">object</span>) =&gt; {
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">slides</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">object</span>.<span style="color:#a6e22e">slides</span>;
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">contents</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">object</span>.<span style="color:#a6e22e">contents</span>;

  <span style="color:#66d9ef">return</span> {
    <span style="color:#a6e22e">slides</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">slides</span>,
    <span style="color:#a6e22e">body</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">contents</span>.<span style="color:#a6e22e">join</span>(<span style="color:#a6e22e">sep</span>)
  };
}
</code></pre></div><h3 id="les-slides">Les Slides</h3>
<h4 id="extraction">Extraction</h4>
<p>On peut utiliser simplement les API du module <code>fs</code> de NodeJS pour lire le contenu d'un répertoire, le trier, &hellip;</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">slides</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">dir</span>, <span style="color:#a6e22e">key</span>)<span style="color:#f92672">:</span> <span style="color:#a6e22e">Promise</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">Slide</span>[]<span style="color:#f92672">&gt;</span> <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span>
    <span style="color:#a6e22e">readDir</span>(<span style="color:#a6e22e">dir</span>) <span style="color:#75715e">// tous les fichiers du répertoire
</span><span style="color:#75715e"></span>    .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">files</span> <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">files</span>.<span style="color:#a6e22e">sort</span>()) <span style="color:#75715e">// on trie (les slides sont préfixés par un numéro)
</span><span style="color:#75715e"></span>    .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">files</span> <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">files</span>.<span style="color:#a6e22e">map</span>(<span style="color:#a6e22e">onlySlide</span>)) <span style="color:#75715e">// on passe une regex pour extraire l&#39;id
</span><span style="color:#75715e"></span>    .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">matchesList</span> <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">matchesList</span>.<span style="color:#a6e22e">filter</span>(<span style="color:#a6e22e">matches</span> <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">matches</span> <span style="color:#f92672">!==</span> <span style="color:#66d9ef">null</span>)) <span style="color:#75715e">// on retire ce qui n&#39;est pas un slide
</span><span style="color:#75715e"></span>    .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">matchesList</span> <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">matchesList</span>.<span style="color:#a6e22e">map</span>(<span style="color:#a6e22e">matches</span> <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">buildSlide</span>(<span style="color:#a6e22e">dir</span>, <span style="color:#a6e22e">matches</span>))) <span style="color:#75715e">// construction du contenu
</span><span style="color:#75715e"></span>    .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">slidePromises</span> <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">Promise</span>.<span style="color:#a6e22e">all</span>(<span style="color:#a6e22e">slidePromises</span>)) <span style="color:#75715e">// Promise&lt;[]&gt; =&gt; Promise[]
</span><span style="color:#75715e"></span>    .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">slides</span> <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">slides</span>.<span style="color:#a6e22e">filter</span>(<span style="color:#a6e22e">slide</span> <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">filterSlide</span>(<span style="color:#a6e22e">slide</span>, <span style="color:#a6e22e">key</span>))) <span style="color:#75715e">// on filtre ceux qui correspondent à ma clef
</span><span style="color:#75715e"></span>    .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">slides</span> <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">slides</span>.<span style="color:#a6e22e">map</span>(<span style="color:#a6e22e">buildSlideNav</span>)) <span style="color:#75715e">// on calcule les previous/next
</span><span style="color:#75715e"></span>    .<span style="color:#66d9ef">catch</span>(<span style="color:#a6e22e">err</span> <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">error</span>(<span style="color:#e6db74">`</span><span style="color:#e6db74">️FAIL to read dir </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">dir</span><span style="color:#e6db74">}</span><span style="color:#e6db74">: </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">err</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>)); <span style="color:#75715e">// Oops
</span></code></pre></div><p>Comme je génère plusieurs présentations, et que certaines contiennent des slides différents, j'utilise des métadonnées pour faire un filtre avant de construire les références sur les slides précédents et suivants.</p>
<h4 id="contenu-dun-slide">Contenu d'un slide</h4>
<p>Après lecture du contenu du fichier, on extrait les éventuelles meta-données, ici rien de très important.
Le point intéressant dans cette partie, c'est que je veux pouvoir utiliser soit du markdown pour les slides simples, soit directement du HTML.
Il n'y a pas de besoins particuliers pour du HTML, par contre pour le markdown on va utiliser la bibliothèque <a href="https://github.com/chjj/marked">marked</a>. L'utilisation est très simple, et on peut facilement ajouter de quoi styliser les blocs de codes avec la colorisation syntaxique avec <a href="https://github.com/isagalaev/highlight.js">highlight.js</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#66d9ef">import</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">as</span> <span style="color:#a6e22e">marked</span> <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;marked&#39;</span>;
<span style="color:#66d9ef">import</span> {<span style="color:#a6e22e">highlightAuto</span>} <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#39;highlight.js&#39;</span>;

<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">highlight</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">code</span> <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">highlightAuto</span>(<span style="color:#a6e22e">code</span>).<span style="color:#a6e22e">value</span>;
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">htmlContent</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">marked</span>(<span style="color:#a6e22e">markdownContent</span>, {<span style="color:#a6e22e">highlight</span>});
</code></pre></div><p>Il suffira ensuite d'ajouter le style souhaité, par exemple j'ai utilisé <code>@import 'node_modules/highlight.js/styles/darcula';</code></p>
<h3 id="styles">Styles</h3>
<p>Pour générer le style j'ai fait du SCSS avec <a href="https://www.npmjs.com/package/node-sass">node-sass</a>, l'intégration est très facile aujourd'hui puisque on peut utiliser cette lib plutôt que du ruby.
J'utilise donc le nesting et les mixins, et il reste encore quelques variables. Mais j'ai privilégié les nouveautés de CSS comme les <a href="https://developer.mozilla.org/fr/docs/Web/CSS/--*">Custom properties</a>.</p>
<p>Pour assurer la portabilité du style, j'utilise le postprocesseur <a href="https://github.com/postcss/postcss">PostCSS</a> avec les plugins <a href="https://github.com/postcss/autoprefixer">autoprefixer</a>, <a href="https://github.com/postcss/postcss-custom-properties">postcss-custom-properties</a>  pour transpiler les customs properties, <a href="http://cssnano.co/">cssnano</a> pour minifier le code, et enfin <a href="https://github.com/borodean/postcss-assets">postcss-assets</a> qui nous permet d'automatiquement inliner les images en <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs">data-uri</a>.</p>
<p>Le code resemble donc à ça :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-typescript" data-lang="typescript"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">scss</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">file</span>)<span style="color:#f92672">:</span> <span style="color:#a6e22e">Promise</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">sass</span>.<span style="color:#a6e22e">Result</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Promise</span>((<span style="color:#a6e22e">resolve</span>, <span style="color:#a6e22e">reject</span>) <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> {
    <span style="color:#a6e22e">sass</span>.<span style="color:#a6e22e">render</span>({<span style="color:#a6e22e">file</span>}, (<span style="color:#a6e22e">err</span>, <span style="color:#a6e22e">data</span>) <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">reject</span>(<span style="color:#a6e22e">err</span>) <span style="color:#f92672">:</span> <span style="color:#a6e22e">resolve</span>(<span style="color:#a6e22e">data</span>))
});

<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">css</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">dir</span>, <span style="color:#a6e22e">minify</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>)<span style="color:#f92672">:</span> <span style="color:#a6e22e">Promise</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">string</span><span style="color:#f92672">&gt;</span> <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> {
    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">file</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">join</span>(<span style="color:#a6e22e">dir</span>, <span style="color:#e6db74">&#39;index.scss&#39;</span>);
    <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">plugins</span> <span style="color:#f92672">=</span> [
        <span style="color:#a6e22e">customProperties</span>({<span style="color:#a6e22e">preserve</span>: <span style="color:#66d9ef">true</span>}),
        <span style="color:#a6e22e">autoprefixer</span>(),
        <span style="color:#a6e22e">assets</span>({<span style="color:#a6e22e">basePath</span>: <span style="color:#66d9ef">dir</span>})
    ];
    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">minify</span>) {
        <span style="color:#a6e22e">plugins</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">cssnano</span>());
    }
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">scss</span>(<span style="color:#a6e22e">file</span>)
        .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">postcss</span>(<span style="color:#a6e22e">plugins</span>).<span style="color:#a6e22e">process</span>(<span style="color:#a6e22e">result</span>.<span style="color:#a6e22e">css</span>))
        .<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">result</span> <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">result</span>[<span style="color:#e6db74">&#39;content&#39;</span>])
        .<span style="color:#66d9ef">catch</span>(<span style="color:#a6e22e">err</span> <span style="color:#f92672">=</span><span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">error</span>(<span style="color:#e6db74">`</span><span style="color:#e6db74">️FAIL to create CSS </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">dir</span><span style="color:#e6db74">}</span><span style="color:#e6db74">: </span><span style="color:#e6db74">${</span><span style="color:#a6e22e">err</span><span style="color:#e6db74">}</span><span style="color:#e6db74">`</span>));
};
</code></pre></div><h3 id="serveur-et-serveur-de-développement">Serveur et serveur de développement</h3>
<p>Techniquement, on peut ouvrir la présentation avec le protocle <code>file://</code>, mais comme j'ai quelques liens externes, il faut utiliser le protocole <code>http://</code>. La solution la plus simple qui existe est d'utiliser python avec <code>python -m SimpleHTTPServer</code>. Cependant, cette solution n'est pas très pratique pour du développement, une fois qu'on a pris goût au LiveReload c'est difficile de s'en passer. Je préfère utiliser <a href="https://github.com/johnpapa/lite-server">lite-server</a>, c'est super simple d'usage, et ça utilise <a href="https://www.browsersync.io/">BrowserSync</a> pour le LiveReload.</p>
<p>Les fichiers TypeScript peuvent être compilé en mode &lsquo;watch&rsquo;  avec  la commande <code>tsc -w</code>.
Pour reconstruire automatiquement les slides lors d'une modification, j'utilise <a href="https://nodemon.io/">nodemon</a>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json"><span style="color:#e6db74">&#34;scripts&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> {
    <span style="color:#f92672">&#34;clean&#34;</span>: <span style="color:#e6db74">&#34;rimraf js/ dist/&#34;</span>,
    <span style="color:#f92672">&#34;start&#34;</span>: <span style="color:#e6db74">&#34;lite-server&#34;</span>,
    <span style="color:#f92672">&#34;build:dev&#34;</span>: <span style="color:#e6db74">&#34;tsc &amp;&amp; node js/index.js&#34;</span>,
    <span style="color:#f92672">&#34;build&#34;</span>: <span style="color:#e6db74">&#34;npm run clean &amp;&amp; tsc &amp;&amp; node js/index.js --minify&#34;</span>,
    <span style="color:#f92672">&#34;serve&#34;</span>: <span style="color:#e6db74">&#34;npm run start &amp; tsc -w &amp; nodemon js/index.js&#34;</span>
  }
</code></pre></div><p>Je préfère utiliser les fichiers de configuration pour nodemon :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  <span style="color:#f92672">&#34;verbose&#34;</span>: <span style="color:#66d9ef">true</span>,
  <span style="color:#f92672">&#34;delay&#34;</span>: <span style="color:#ae81ff">2</span>,
  <span style="color:#f92672">&#34;watch&#34;</span>: [
    <span style="color:#e6db74">&#34;src/&#34;</span>,
    <span style="color:#e6db74">&#34;js/&#34;</span>
  ],
  <span style="color:#f92672">&#34;ext&#34;</span>: <span style="color:#e6db74">&#34;scss png js svg html md&#34;</span>
}
</code></pre></div><p>et pour BrowserSync :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  <span style="color:#f92672">&#34;server&#34;</span>: {
    <span style="color:#f92672">&#34;baseDir&#34;</span>: <span style="color:#e6db74">&#34;dist&#34;</span>,
    <span style="color:#f92672">&#34;directory&#34;</span>: <span style="color:#66d9ef">true</span>
  },
  <span style="color:#f92672">&#34;notify&#34;</span>: <span style="color:#66d9ef">false</span>,
  <span style="color:#f92672">&#34;open&#34;</span>: <span style="color:#66d9ef">false</span>
}
</code></pre></div><h3 id="comment-publier-dans-les-github-pages-">Comment publier dans les Github Pages ?</h3>
<p>Dans ce dernier point concernant les outils, je voulais utiliser les <a href="https://pages.github.com/">pages github</a> pour publier les slides.
Rien de plus simple avec <a href="https://github.com/tschaub/gh-pages">gh-pages</a> il suffit de lancer la commande <code>gh-pages --dist dist/</code>.</p>
<h2 id="conclusion">Conclusion</h2>
<p>Si vous voulez voir jusqu'où on peut aller en HTML/CSS, y compris dans les emails, je vous recommande la présentation suivante: <a href="https://vimeo.com/181481382">Modern and interactive email</a>. Pour améliorer vos connaissances en CSS, je vous recommande chaudement le livre (et les présentations) <a href="https://www.amazon.fr/CSS-Secrets-Lea-Verou/dp/1449372635">CSS Secret</a> de <a href="http://lea.verou.me/">Lea Verou</a>.</p>
<p>Au delà du CSS qui est si vaste que l'on peut y passer des années pour approfondir, je me suis beaucoup amusé à construire ces slides. L'écosystème NodeJS est immense, parfois inégal mais on y trouve à peu près tout ce que l'on veut. L'ES2015 (et plus) et TypeScript sont véritablement sympas, c'est aussi plus accessible maintenant pour les développeurs Java, attention toutefois le JavaScript peut être piégeux quand il est mal maîtrisé.</p>
<p>Pour apprendre, il faut sortir de sa zone de confort, les sides-projects sont idéaux pour cela. J'ai eu l'occasion d'échanger avec <a href="https://twitter.com/pixelastic">Tim Carry</a> à MiXiT, il est l'auteur de <a href="https://pixelastic.github.io/css-flags/">CSS Flags</a> dont le principe est de faire les drapeaux avec un seul <code>&lt;div&gt;</code> et du CSS, on retrouve le même principe dans ce (périlleux) exercice (Voir <a href="http://talks.pixelastic.com/slides/css-flags-mixit/#/">http://talks.pixelastic.com/slides/css-flags-mixit/#/</a>).</p>
<p>Have fun &amp; Hack !</p></article>

    <div class="authors">
        
        <div class="author">
            <a href="https://twitter.com/ilaborie" rel="author">
                <img src="http://www.gravatar.com/avatar/5870075cc4934bb7c32f2a6c56cc4f8d?s=48" alt="Igor Laborie">
                <span>Igor Laborie</span>
            </a>
        </div>
        
    </div>
</section>


<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "monkeypatchblog" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>




        
        <footer class="top">
    <div>
      <h3>Rester en contact</h3>
      <p>
        <a class="contact icon-map" href="/contact">
          <i class="fa fa-map-marker" aria-hidden="true"></i>
          <img src="/images/icons/Toulouse.png" alt="Toulouse">
        </a>
      </p>
      <p>
        <i class="fa fa-envelope-o" aria-hidden="true"></i>
        <a class="mail" href="mailto:contact@monkeypatch.io">contact@monkeypatch.io</a>
      </p>
    </div>
    <div class="social-network">
      <h3>Réseaux sociaux</h3>
      <ul class="social">
        <li>
          <a href="https://twitter.com/monkeypatch_io">
            <i class="fa fa-twitter" aria-hidden="true"></i>
          </a>
        </li>
        <li>
          <a href="https://www.linkedin.com/company/monkeypatch-io">
            <i class="fa fa-linkedin" aria-hidden="true"></i>
          </a>
        </li>
      </ul>
    </div>
  
</footer>

<footer class="bottom">
  <div>
    Copyright @ 2019 MonkeyPatch -<a href="/terms">Termes et conditions</a>
  </div>
  <div>
    Made with <i class="fa fa-heart" aria-hidden="true"></i> In Toulouse
  </div>
  <a class="goToTop" href="#top">
    <i class="fa fa-caret-up" aria-hidden="true"></i>
  </a>
</footer>

        
    </main>


<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KGGFWH');</script>


<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KGGFWH" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

    <script src="/scripts/modernizr-custom.js"></script>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/prism.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-haskell.min.js" integrity="sha256-MxfNlM5EW2pm9DZPWGvreAHxKNF8NK8DaLSVVtG+MjE=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-clojure.min.js" integrity="sha256-eGVrzVqJ/GigoW8fpafNd5j00+zIESDj7FeJcrBUlrA=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-kotlin.min.js" integrity="sha256-BLmzS+mVDv8mg8ciLO7Lxoz1vAYhFtyboFOT0EMY+lg=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-c.min.js" integrity="sha256-POQgKdZt7XGlcjT5opjx6fXs/Pt4eao8x7Q8JRaa/1A=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-brainfuck.min.js" integrity="sha256-VMnAWpm0qsoKYhwjGWpbpIFoEqmKFqgRMvrsPe4SLA8=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-lolcode.js" integrity="sha256-GfPLGNDlIwgQKINyzfQdNvX/cI3Pm9/4nQRGez7eMtc=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-typescript.min.js" integrity="sha256-m2ghaPy1JKNwDlCG/ObigLWw9/7qGHvUhoXp6odkcTI=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-json.min.js" integrity="sha256-oA5rMHeAX+cg/CdcQ0VHmIqqw/IW4o2KAUEjo4QvShs=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-yaml.min.js" integrity="sha256-pxsoS7PqPuy6D5T0Dq2PEXKJ5SRlIkdG8hpoMxQ0YlM=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/components/prism-java.min.js" integrity="sha256-4jBV//QjNNXvyK55J0R2NwTbl2SAzk/4DHBynIhrxWQ=" crossorigin="anonymous"></script>


<script>
Array.from(document.querySelectorAll(".post article [id]"))
    .forEach(function (elt) {
        var id = elt.getAttribute("id");
        var content = elt.textContent;
        elt.innerHTML = '<a class="anchor" href="#' + id + '">' + content + '</a>';
    });
</script>

<script>
    window.twttr = (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0],
            t = window.twttr || {};
        if (d.getElementById(id)) return t;
        js = d.createElement(s);
        js.id = id;
        js.src = "https://platform.twitter.com/widgets.js";
        fjs.parentNode.insertBefore(js, fjs);

        t._e = [];
        t.ready = function (f) {
            t._e.push(f);
        };

        return t;
    }(document, "script", "twitter-wjs"));
</script>

</body>

</html>