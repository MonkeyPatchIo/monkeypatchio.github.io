<!DOCTYPE html>
<!--  lastBuildDate : Mon, 29 Aug 2016 17:05:26 +0200 -->
<html>
<head>
  
  
  <title>Mktd#1 Feign Vs Retrofit &#58; 1 Getting Started</title>
  
  <!-- Meta -->
  <meta charset="utf-8">
  <meta http-equiv="content-language" content="fr" />
  <meta name="language" content="fr" />
  <!-- Google site verification -->
  <meta name="google-site-verification" content="Gq_ytzUtfYn95WsiH66e4Lfb8zANT-LUwD8JgH9xXdw" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="keywords" content="Expertise informatique, Dévelopement informatique" />

  <!-- RSS feed -->
  <link rel="alternate" type="application/rss+xml" title=" RSS Feed" href="http://www.monkeypatch.io/blog/feed.xml" />

  <!-- SEO -->
  <meta property="og:title" content="Mktd#1 Feign Vs Retrofit &#58; 1 Getting Started" />

  
  <meta property="og:description" content="Introduction

Early July we organised in Toulouse our first MonkeyTechDays hosted by HarryCow comparing the technologies: Feign vs Retrofit. The goal of a MKTD is to compare and learn new technologies running challenges throughout the day.

We decided to improve our knowledge of REST clients in Java during this first event. We started with Feign which is designed by Netflix and Retrofit written by Square. These two libraries provide an elegant way to speed up the development of REST clients in Java compare to traditional solutions such as JAX-RS clients, Spring Rest Template, etc…

" />
  <meta name="description" content="Introduction

Early July we organised in Toulouse our first MonkeyTechDays hosted by HarryCow comparing the technologies: Feign vs Retrofit. The goal of a MKTD is to compare and learn new technologies running challenges throughout the day.

We decided to improve our knowledge of REST clients in Java during this first event. We started with Feign which is designed by Netflix and Retrofit written by Square. These two libraries provide an elegant way to speed up the development of REST clients in Java compare to traditional solutions such as JAX-RS clients, Spring Rest Template, etc…

" />
  
  
  
    <meta name="author" content="Emmanuel Vinas">
    <link rel="author" href="https://plus.google.com/+vinasemmanuel"/>
    
      <link rel="publisher" href="https://plus.google.com/+vinasemmanuel"/>
    
  
    <meta name="author" content="Igor Laborie">
    <link rel="author" href="https://plus.google.com/+IgorLaborie"/>
    
      <link rel="publisher" href="https://plus.google.com/+IgorLaborie"/>
    
  
    <meta name="author" content="Bruno Chauvet">
    <link rel="author" href="https://plus.google.com/"/>
    
      <link rel="publisher" href="https://plus.google.com/"/>
    
  

  
    <meta property="og:type" content="article"/>
    <meta property="og:article:published_time" content="2016-08-09T00:00:00+02:00">
    
      <meta property="og:article:author:username" content="Emmanuel Vinas">
    
      <meta property="og:article:author:username" content="Igor Laborie">
    
      <meta property="og:article:author:username" content="Bruno Chauvet">
    
    
    <meta property="og:article:tag" content="MKTD">
    
    <meta property="og:article:tag" content="Java">
    
    <meta property="og:article:tag" content="REST">
    
    <meta property="og:article:tag" content="Feign">
    
    <meta property="og:article:tag" content="Retrofit">
    
  
  
  
  <meta property="og:image" content="http://www.monkeypatch.io/public/images/logos/logo-FeignVsRetrofit.png"/>

  <meta property="og:url" content="http://www.monkeypatch.io/2016/08/09/MKTD-1-feign-vs-retrofit-&-58;-1-getting-started.html"/>
  <meta property="og:site_name" content="MonkeyPatch"/>
  
  <!-- Twitter tags -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@MonkeyPatch_io" />
  <meta name="twitter:url" content="http://www.monkeypatch.io/2016/08/09/MKTD-1-feign-vs-retrofit-&-58;-1-getting-started.html">
  <meta name="twitter:title" content="Mktd#1 Feign Vs Retrofit &#58; 1 Getting Started">
  <meta name="twitter:description" content="Introduction

Early July we organised in Toulouse our first MonkeyTechDays hosted by HarryCow comparing the technologies: Feign vs Retrofit. The goal of a MKTD is to compare and learn new technologies running challenges throughout the day.

We decided to improve our knowledge of REST clients in Java during this first event. We started with Feign which is designed by Netflix and Retrofit written by Square. These two libraries provide an elegant way to speed up the development of REST clients in Java compare to traditional solutions such as JAX-RS clients, Spring Rest Template, etc…

">
  <meta name="twitter:image" content="http://www.monkeypatch.io/public/images/logos/logo-FeignVsRetrofit.png">

  <!-- Lang --> 
  <link rel="alternate" hreflang="en" href="http://www.monkeypatch.io/en/index" />
  <link rel="alternate" hreflang="fr" href="http://www.monkeypatch.io/index" />
  
  <meta property="og:locale" content="fr_FR"/>
  <meta property="og:locale:alternate" content="en_US"/>
  

  <link rel="shortcut icon" href="favicon.ico">
  
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700" rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">

  <!-- Style -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
  <link id="theme-style" rel="stylesheet" href="/css/main.css">

 <script type="application/ld+json">
  {
    "@context": "http://schema.org",
    
      "@type": "BlogPosting", // 
      "mainEntityOfPage": "http://www.monkeypatch.io/2016/08/09/MKTD-1-feign-vs-retrofit-&-58;-1-getting-started.html", 
    
    "author": [
      
      { "@type": "Person", "name": "Emmanuel Vinas" },
      
      { "@type": "Person", "name": "Igor Laborie" },
      
      { "@type": "Person", "name": "Bruno Chauvet" }
      
    ],
    "name": "MonkeyPatch",
    "headline": "Mktd#1 Feign Vs Retrofit &#58; 1 Getting Started",
    "image": "http://www.monkeypatch.io/public/images/logos/logo-FeignVsRetrofit.png",
    
      "datePublished": "2016-08-09T00:00:00+02:00",
      "dateModified": "2016-08-09T00:00:00+02:00",
      "datePublished": "2016-08-09T00:00:00+02:00",
    
    "publisher": {
      "@type": "Organization",
      "name": "MonkeyPatch",
      "logo": "http://www.monkeypatch.io/public/images/logos/logo-mkp-blue-x256.png",
      "sameAs": [
        "https://twitter.com/monkeypatch_io","https://www.linkedin.com/company/monkeypatch-io"
      ]
    },
    "description": "Société de conseil et d'expertise en informatique spécialisée dans les nouvelles technologies.",
    "url": "http://www.monkeypatch.io/2016/08/09/MKTD-1-feign-vs-retrofit-&-58;-1-getting-started.html"
  }
</script>
</head>

<body class="post">
  <header>
  <div class="menu">
    <div class="logo">
      <a href="/index">
        <img alt="Monkey Patch" src="/public/images/logos/logo-monkey.svg">
      </a>
    </div>
    
    <nav class="lang">
      <ul>
        <li class="">
          <a href="en/2016/08/09/MKTD-1-feign-vs-retrofit-&-58;-1-getting-started.html" >EN</a>
        </li>
        <li class="sep">|</li>
        <li class="active">
          <a href="/2016/08/09/MKTD-1-feign-vs-retrofit-&-58;-1-getting-started.html" >FR</a>
        </li>
      </ul>
    </nav>
    
    <nav class="menu">
      <ul>
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
            <li class="">
              <a href="/expert">Notre Expertise</a>
            </li>
          
        
          
            <li class="">
              <a href="/about">Notre Philo</a>
            </li>
          
        
          
            <li class="">
              <a href="/careers">Être Monkeys</a>
            </li>
          
        
          
            <li class="">
              <a href="/job">Nos Jobs</a>
            </li>
          
        
          
            <li class="">
              <a href="/contact">Contact</a>
            </li>
          
        
        <li class="">
          <a href="/blog">Blog</a>
        </li>
      </ul>
    </nav>
      
    <nav class="hamburger">
      <label for="menu-hamburger">
        <i class="fa fa-bars" aria-hidden="true"></i>
      </label>
    </nav>
    
  </div>
  <input type="checkbox" id="menu-hamburger"/>
  <nav class="menu-hamburger">
     <ul>
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
            <li class="">
              <a href="/expert">Notre Expertise</a>
            </li>
          
        
          
            <li class="">
              <a href="/about">Notre Philo</a>
            </li>
          
        
          
            <li class="">
              <a href="/careers">Être Monkeys</a>
            </li>
          
        
          
            <li class="">
              <a href="/job">Nos Jobs</a>
            </li>
          
        
          
            <li class="">
              <a href="/contact">Contact</a>
            </li>
          
        
        <li class="">
          <a href="/blog">Blog</a>
        </li>
      </ul>
      <ul class="lang">
        <li class="">
          <a href="en/2016/08/09/MKTD-1-feign-vs-retrofit-&-58;-1-getting-started.html" >EN</a>
        </li>
        <li class="active">
          <a href="/2016/08/09/MKTD-1-feign-vs-retrofit-&-58;-1-getting-started.html" >FR</a>
        </li>
      </ul>
  </nav>
</header>

  <main>
    <nav class="index"><!-- fill with JS --></nav>
    <section class="post">
      <h1 id="top">
        <span>Mktd#1 Feign Vs Retrofit &#58; 1 Getting Started</span>
        <span class="date">


  August 09, 2016

</span>
        <a href="#disqus_thread" class="count"><script id="dsq-count-scr" src="//monkeypatchblog.disqus.com/count.js" async></script></a>
      </h1>

      <div class="tags">
        
          <span>MKTD</span> 
        
          <span>Java</span> 
        
          <span>REST</span> 
        
          <span>Feign</span> 
        
          <span>Retrofit</span> 
         
      </div>

      <div class="share">
        <a class="twitter-share-button"
          href="https://twitter.com/share"
          data-size="large"
          data-via="monkeypatch_io"
          data-text="Mktd#1 Feign Vs Retrofit &#58; 1 Getting Started"
          data-hashtags="MKTD,Java,REST,Feign,Retrofit"
          >Tweet</a>
      </div>

      <article><h2 id="introduction">Introduction</h2>

<p>Early July we organised in Toulouse our first <a href="http://www.monkeytechdays.com/">MonkeyTechDays</a> hosted by <a href="http://www.harrycow.com/">HarryCow</a> comparing the technologies: <a href="http://www.monkeytechdays.com/events/mktd-1">Feign vs Retrofit</a>. The goal of a <abbr title="MonkeyTechDays">MKTD</abbr> is to compare and learn new technologies running challenges throughout the day.</p>

<p>We decided to improve our knowledge of <abbr title="REpresentational State Transfer">REST</abbr> clients in Java during this first event. We started with <a href="https://github.com/OpenFeign/feign">Feign</a> which is designed by <a href="https://netflix.github.io/">Netflix</a> and <a href="http://square.github.io/retrofit/">Retrofit</a> written by <a href="https://github.com/square">Square</a>. These two libraries provide an elegant way to speed up the development of <abbr title="REpresentational State Transfer">REST</abbr> clients in Java compare to traditional solutions such as JAX-RS clients, Spring Rest Template, etc…
<!--more--></p>

<p>To bootstrap the teams playing around with these technologies, we had made available several <abbr title="REpresentational State Transfer">REST</abbr> services around the Monkeys theme.
Source code writtent this day is available at: <a href="https://github.com/monkeytechdays">https://github.com/monkeytechdays</a></p>

<h2 id="challenge-0-forming-teams">Challenge #0: Forming teams</h2>

<p>This non-technical challenge allows us forming balanced teams on each technology while finishing our breakfast: coffee and croissants. The Feign team was lead by <a href="https://twitter.com/ilaborie">Igor</a> and the Retrofit team by <a href="https://twitter.com/EmmanuelVinas">Emmanuel</a>.</p>

<h2 id="challenge-1-getting-started">Challenge #1: Getting started</h2>

<p>The goal of ths first challenge is to get familiar with the technologies.
The principle of <a href="https://github.com/OpenFeign/feign">Feign</a> and <a href="http://square.github.io/retrofit/">Retrofit</a> is to write an interface describing the <abbr title="REpresentational State Transfer">REST</abbr> service and the <abbr title="Application Programming Interface">API</abbr> will take care of implementing an instance of this interface.
At the end of this first challenge, completing the interfaces for the <abbr title="REpresentational State Transfer">REST</abbr> services was sufficient to get the unit tests green.</p>

<p>Here are the two interfaces returning <abbr title="JavaScript Object Notation">JSON</abbr> format:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MonkeyApi</span> <span class="o">{</span>
   <span class="n">Page</span><span class="o">&lt;</span><span class="n">Monkey</span><span class="o">&gt;</span> <span class="nf">getMonkeys</span><span class="o">(</span><span class="kt">int</span> <span class="n">page</span><span class="o">);</span>
   <span class="n">Monkey</span> <span class="nf">getMonkeyByName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">);</span>
   <span class="n">Monkey</span> <span class="nf">createMonkey</span><span class="o">(</span><span class="n">Monkey</span> <span class="n">monkey</span><span class="o">);</span>
   <span class="kt">void</span> <span class="nf">deleteMonkey</span><span class="o">(</span><span class="n">String</span> <span class="n">id</span><span class="o">);</span>
<span class="o">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<div class="language-java highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MonkeyRaceApi</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">MonkeyRace</span><span class="o">&gt;</span> <span class="nf">getMonkeyRaces</span><span class="o">();</span>
<span class="o">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>and the service returning <abbr title="eXtensible Markup Language">XML</abbr> data:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MonkeyStatsApi</span> <span class="o">{</span>
    <span class="n">MonkeyStatistics</span> <span class="nf">getMonkeyStats</span><span class="o">();</span>
<span class="o">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>The code is available here: <a href="https://github.com/monkeytechdays/mktd1-defi1">GitHub</a></p>

<p>To pass this challenge, the following is required:
* GET request and parse the <abbr title="JavaScript Object Notation">JSON</abbr> response
* GET request with a <abbr title="Uniform Resource Locator">URL</abbr> parameter
* GET request with a path parameter
* POST request with encoded <abbr title="JavaScript Object Notation">JSON</abbr> body
* DELETE request
* GET request and parse the <abbr title="eXtensible Markup Language">XML</abbr> response</p>

<h2 id="feign">Feign</h2>

<p>The Feign documentation is hosted on Github inside the <a href="https://github.com/OpenFeign/feign">README.md</a>
Extensions documentation is also available in the README.md files of these extensions</p>

<blockquote>
  <p>Even if Feign supports Java 6 by default, we have been using Java 8</p>
</blockquote>

<h3 id="dependencies">Dependencies</h3>

<p>To start using Feign inside a project, the following dependencies need to be added to the POM file:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18</pre></td><td class="code"><pre><span class="c">&lt;!-- Feign --&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
   <span class="nt">&lt;groupId&gt;</span>com.netflix.feign<span class="nt">&lt;/groupId&gt;</span>
   <span class="nt">&lt;artifactId&gt;</span>feign-core<span class="nt">&lt;/artifactId&gt;</span>
   <span class="nt">&lt;version&gt;</span>8.17.0<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="c">&lt;!-- Feign: encode/decode JSON with GSON --&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
   <span class="nt">&lt;groupId&gt;</span>com.netflix.feign<span class="nt">&lt;/groupId&gt;</span>
   <span class="nt">&lt;artifactId&gt;</span>feign-gson<span class="nt">&lt;/artifactId&gt;</span>
   <span class="nt">&lt;version&gt;</span>8.17.0<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="c">&lt;!-- Feign: encode/decode XML with JAXB --&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
   <span class="nt">&lt;groupId&gt;</span>com.netflix.feign<span class="nt">&lt;/groupId&gt;</span>
   <span class="nt">&lt;artifactId&gt;</span>feign-jaxb<span class="nt">&lt;/artifactId&gt;</span>
   <span class="nt">&lt;version&gt;</span>8.17.0<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></td></tr></tbody></table>
</div>
</div>

<blockquote>
  <p>We highly recommend setting a maven property to define the version of Feign to be used</p>
</blockquote>

<h3 id="interfaces-configuration">Interfaces Configuration</h3>

<p>The next step is to annotate the interfaces so Feign can implement the <abbr title="HyperText Transfer Protocol">HTTP</abbr> requests of each method. Feign comes with its own annotations describing the <abbr title="HyperText Transfer Protocol">HTTP</abbr> requests:</p>

<ul>
  <li><code class="highlighter-rouge">@RequestLine</code>: describes the first <abbr title="HyperText Transfer Protocol">HTTP</abbr> line: <abbr title="HyperText Transfer Protocol">HTTP</abbr> verb (GET, POST, PUT, DELETE, …) and path, defining as well the request parameters. Path parameters can be defined using the <code class="highlighter-rouge"><span class="p">{</span><span class="err">name</span><span class="p">}</span></code> convention.</li>
  <li><code class="highlighter-rouge">@Param</code>: binds a variable defined in other annotations (<code class="highlighter-rouge">@RequestLine</code>, <code class="highlighter-rouge">@Headers</code>, …) and the method parameter. The variable name must be defined by the annotation.</li>
  <li><code class="highlighter-rouge">@Headers</code>: adds a custom <abbr title="HyperText Transfer Protocol">HTTP</abbr> header, similarly to <code class="highlighter-rouge">@RequestLine</code>, the <code class="highlighter-rouge"><span class="p">{</span><span class="err">name</span><span class="p">}</span></code> convention can be used to define a variable inside the <abbr title="HyperText Transfer Protocol">HTTP</abbr> header. This annotation is applicable at the interface or method level.
If there is no annotation for the body of a POST or PUT request, the parameters without annotation will be converted inside the request body.</li>
</ul>

<p>So we end up with the following:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MonkeyRaceApi</span> <span class="o">{</span>
    <span class="nd">@RequestLine</span><span class="o">(</span><span class="s">"GET /races"</span><span class="o">)</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">MonkeyRace</span><span class="o">&gt;</span> <span class="nf">getMonkeyRaces</span><span class="o">();</span>
<span class="o">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<div class="language-java highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre></td><td class="code"><pre><span class="nd">@Headers</span><span class="o">(</span><span class="s">"Content-Type: application/json"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MonkeyApi</span> <span class="o">{</span>
    <span class="nd">@RequestLine</span><span class="o">(</span><span class="s">"GET ?page={page}"</span><span class="o">)</span>
    <span class="n">Page</span><span class="o">&lt;</span><span class="n">Monkey</span><span class="o">&gt;</span> <span class="nf">getMonkeys</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">"page"</span><span class="o">)</span> <span class="kt">int</span> <span class="n">page</span><span class="o">);</span>

    <span class="nd">@RequestLine</span><span class="o">(</span><span class="s">"GET /{name}"</span><span class="o">)</span>
    <span class="n">Monkey</span> <span class="nf">getMonkeyByName</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">"name"</span><span class="o">)</span> <span class="n">String</span> <span class="n">name</span><span class="o">);</span>

    <span class="nd">@RequestLine</span><span class="o">(</span><span class="s">"POST "</span><span class="o">)</span>
    <span class="n">Monkey</span> <span class="nf">createMonkey</span><span class="o">(</span><span class="n">Monkey</span> <span class="n">monkey</span><span class="o">);</span>

    <span class="nd">@RequestLine</span><span class="o">(</span><span class="s">"DELETE /{id}"</span><span class="o">)</span>
    <span class="kt">void</span> <span class="nf">deleteMonkey</span><span class="o">(</span><span class="nd">@Param</span><span class="o">(</span><span class="s">"id"</span><span class="o">)</span> <span class="n">String</span> <span class="n">id</span><span class="o">);</span>
<span class="o">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<div class="language-java highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MonkeyStatsApi</span> <span class="o">{</span>
    <span class="nd">@RequestLine</span><span class="o">(</span><span class="s">"GET /stats"</span><span class="o">)</span>
    <span class="n">MonkeyStatistics</span> <span class="nf">getMonkeyStats</span><span class="o">();</span>
<span class="o">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="instances-construction">Instances construction</h3>

<p>For the last step, we leverage the <abbr title="Application Programming Interface">API</abbr> <em>fluent builder</em> provided by Feign to instanciate the interfaces.
This is where the encoders/decoders dependencies added by maven earlier on will kick-in:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="kd">static</span> <span class="n">MonkeyRaceApi</span> <span class="nf">buildRaceApi</span><span class="o">(</span><span class="n">String</span> <span class="n">url</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Feign</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
            <span class="c1">// Decode JSON from respone body</span>
            <span class="o">.</span><span class="na">decoder</span><span class="o">(</span><span class="k">new</span> <span class="n">GsonDecoder</span><span class="o">())</span>
            <span class="o">.</span><span class="na">target</span><span class="o">(</span><span class="n">MonkeyRaceApi</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">url</span><span class="o">);</span>
<span class="o">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<div class="language-java highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8</pre></td><td class="code"><pre><span class="kd">static</span> <span class="n">MonkeyApi</span> <span class="nf">buildMonkeyApi</span><span class="o">(</span><span class="n">String</span> <span class="n">url</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Feign</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
            <span class="c1">// Decode JSON from respone body</span>
            <span class="o">.</span><span class="na">decoder</span><span class="o">(</span><span class="k">new</span> <span class="n">GsonDecoder</span><span class="o">())</span>
            <span class="c1">// Encode JSON for request body</span>
            <span class="o">.</span><span class="na">encoder</span><span class="o">(</span><span class="k">new</span> <span class="n">GsonEncoder</span><span class="o">())</span>
            <span class="o">.</span><span class="na">target</span><span class="o">(</span><span class="n">MonkeyApi</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">url</span> <span class="o">+</span> <span class="s">"/monkeys"</span><span class="o">);</span>
<span class="o">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<div class="language-java highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11</pre></td><td class="code"><pre><span class="kd">static</span> <span class="n">MonkeyStatsApi</span> <span class="nf">buildStatsApi</span><span class="o">(</span><span class="n">String</span> <span class="n">url</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// Create JAXB context factory</span>
    <span class="n">JAXBContextFactory</span> <span class="n">jaxbFactory</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JAXBContextFactory</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
            <span class="o">.</span><span class="na">withMarshallerJAXBEncoding</span><span class="o">(</span><span class="s">"UTF-8"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">build</span><span class="o">();</span>

    <span class="k">return</span> <span class="n">Feign</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
            <span class="c1">// Decode XML from response body</span>
            <span class="o">.</span><span class="na">decoder</span><span class="o">(</span><span class="k">new</span> <span class="n">JAXBDecoder</span><span class="o">(</span><span class="n">jaxbFactory</span><span class="o">))</span>
            <span class="o">.</span><span class="na">target</span><span class="o">(</span><span class="n">MonkeyStatsApi</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">url</span><span class="o">);</span>
<span class="o">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<blockquote>
  <p>Feign concatenates the <abbr title="Uniform Resource Locator">URL</abbr> with the path defined by the <code class="highlighter-rouge">@RequestLine</code> annotation. This provides an easy way to add a prefix to our services if required.</p>
</blockquote>

<h3 id="conclusion">Conclusion</h3>

<p>Very few drawbacks using Feign during this experiment:</p>

<ul>
  <li>To get the <abbr title="eXtensible Markup Language">XML</abbr> decoding to work, we had to tweak the object so <a href="https://docs.oracle.com/javase/tutorial/jaxb/intro/">JAXB</a> can correctly <em>deserialise</em> the <abbr title="eXtensible Markup Language">XML</abbr> response. But this is a more general issue with JAXB and <abbr title="eXtensible Markup Language">XML</abbr> parsing.</li>
  <li>Error messages are not always easy to decrypt, but with a bit more experience and basic knowledge of the <abbr title="HyperText Transfer Protocol">HTTP</abbr> protocol, this is not really an issue. A typical mistake is to forget the <abbr title="HyperText Transfer Protocol">HTTP</abbr> verb inside the <code class="highlighter-rouge">@RequestLine</code> annotation.</li>
</ul>

<p>A lot of benefits:</p>

<ul>
  <li>Ease of use and close to <abbr title="HyperText Transfer Protocol">HTTP</abbr> protocol</li>
  <li>Very lightweight without any transitive dependencies for <code class="highlighter-rouge">feign-core</code></li>
  <li>Easy to extend, eg: swapping encoders/decoders <a href="https://github.com/OpenFeign/feign/tree/master/gson">GSON</a>, <a href="https://github.com/OpenFeign/feign/tree/master/jackson">Jackson</a>, <a href="https://github.com/OpenFeign/feign/tree/master/jaxb">JAXB</a></li>
  <li>Good support of Java 8, the instances methods <code class="highlighter-rouge">static</code> and <code class="highlighter-rouge">default</code> are supported</li>
</ul>

<p>General comments</p>

<ul>
  <li>There are a few more annotations <code class="highlighter-rouge">@Body</code>, <code class="highlighter-rouge">@HeaderMap</code>, <code class="highlighter-rouge">@QueryMap</code></li>
  <li>it is possible to configure how variables (<code class="highlighter-rouge">@Param</code>) are converted into String via <code class="highlighter-rouge">Expanders</code></li>
  <li>The root path of all the interface methods can be added to the <abbr title="Uniform Resource Locator">URL</abbr> used by the <em>builder</em></li>
</ul>

<blockquote>
  <p>There is no dark magic inside Feign: it relies on the <abbr title="Java Developement Kit">JDK</abbr>: <code class="highlighter-rouge">java.net.HttpURLConnection</code>, <code class="highlighter-rouge">java.lang.reflect.Proxy</code>, <code class="highlighter-rouge">java.lang.reflect.InvocationHandler</code>, …</p>
</blockquote>

<h2 id="retrofit">Retrofit</h2>

<p>The first step is to add the Retrofit dependencies:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18</pre></td><td class="code"><pre><span class="cp">&lt;! -- Retrofit dependency --&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>com.squareup.retrofit2<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>retrofit<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>${retrofit.version}<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="cp">&lt;! -- Jackson converter for JSON --&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>com.squareup.retrofit2<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>converter-jackson<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>${retrofit.version}<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="c">&lt;!-- Simple converter for XML --&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>com.squareup.retrofit2<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>converter-simplexml<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>${retrofit.version}<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Next step is to add the Retrofit specific annotations to the interface
The rules of the game being to not modify the interface signature, we had to add a new interface to <code class="highlighter-rouge">CallFactory</code> used by Retrofit by default.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MonkeyRaceService</span> <span class="o">{</span>
   <span class="nd">@GET</span><span class="o">(</span><span class="s">"races"</span><span class="o">)</span>
    <span class="n">Call</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">MonkeyRace</span><span class="o">&gt;&gt;</span> <span class="nf">getMonkeyRaces</span><span class="o">();</span>
<span class="o">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<div class="language-java highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13</pre></td><td class="code"><pre><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MonkeyService</span> <span class="o">{</span>
    <span class="nd">@GET</span><span class="o">(</span><span class="s">"monkeys"</span><span class="o">)</span>
    <span class="n">Call</span><span class="o">&lt;</span><span class="n">Page</span><span class="o">&lt;</span><span class="n">Monkey</span><span class="o">&gt;&gt;</span> <span class="nf">getMonkeys</span><span class="o">();</span>

    <span class="nd">@GET</span><span class="o">(</span><span class="s">"monkeys/{name}"</span><span class="o">)</span>
    <span class="n">Call</span><span class="o">&lt;</span><span class="n">Monkey</span><span class="o">&gt;</span> <span class="nf">getMonkeyByName</span><span class="o">(</span><span class="nd">@Path</span><span class="o">(</span><span class="s">"name"</span><span class="o">)</span> <span class="n">String</span> <span class="n">name</span><span class="o">);</span>

    <span class="nd">@POST</span><span class="o">(</span><span class="s">"monkeys"</span><span class="o">)</span>
    <span class="n">Call</span><span class="o">&lt;</span><span class="n">Monkey</span><span class="o">&gt;</span> <span class="nf">create</span><span class="o">(</span><span class="nd">@Body</span> <span class="n">Monkey</span> <span class="n">monkey</span><span class="o">);</span>

    <span class="nd">@DELETE</span><span class="o">(</span><span class="s">"monkeys/{id}"</span><span class="o">)</span>
    <span class="n">Call</span><span class="o">&lt;</span><span class="n">ResponseBody</span><span class="o">&gt;</span> <span class="nf">delete</span><span class="o">(</span><span class="nd">@Path</span><span class="o">(</span><span class="s">"id"</span><span class="o">)</span> <span class="n">String</span> <span class="n">monkeyId</span><span class="o">);</span>
<span class="o">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<div class="language-java highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">MonkeyStatsService</span> <span class="o">{</span>
    <span class="nd">@GET</span><span class="o">(</span><span class="s">"/stats"</span><span class="o">)</span>
    <span class="n">Call</span><span class="o">&lt;</span><span class="n">MonkeyStatistics</span><span class="o">&gt;</span> <span class="nf">getMonkeyStats</span><span class="o">();</span>
<span class="o">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Then we implement the interfaces <code class="highlighter-rouge">MonkeyApi</code>, <code class="highlighter-rouge">MonkeyRaceApi</code>, <code class="highlighter-rouge">MonkeyStatsApi</code> using the Retrofit specific interfaces</p>

<div class="language-java highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</pre></td><td class="code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">RetrofitMonkeyApi</span> <span class="kd">implements</span> <span class="n">MonkeyApi</span><span class="o">,</span> <span class="n">RetrofitApi</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">MonkeyService</span> <span class="n">monkeyService</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setBaseUrl</span><span class="o">(</span><span class="n">String</span> <span class="n">baseUrl</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">monkeyService</span> <span class="o">=</span> <span class="n">createRetrofit</span><span class="o">(</span><span class="n">baseUrl</span><span class="o">,</span> <span class="kc">false</span><span class="o">)</span>
          <span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">MonkeyService</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Page</span><span class="o">&lt;</span><span class="n">Monkey</span><span class="o">&gt;</span> <span class="nf">getMonkeys</span><span class="o">(</span><span class="kt">int</span> <span class="n">page</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nf">executeCall</span><span class="o">(</span><span class="nl">monkeyService:</span><span class="o">:</span><span class="n">getMonkeys</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Monkey</span> <span class="nf">getMonkeyByName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nf">executeCall</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="n">monkeyService</span><span class="o">.</span><span class="na">getMonkeyByName</span><span class="o">(</span><span class="n">name</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">Monkey</span> <span class="nf">createMonkey</span><span class="o">(</span><span class="n">Monkey</span> <span class="n">monkey</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nf">executeCall</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="n">monkeyService</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">monkey</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">deleteMonkey</span><span class="o">(</span><span class="n">String</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">executeCall</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="n">monkeyService</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">id</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<div class="language-java highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21</pre></td><td class="code"><pre><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">RetrofitApi</span> <span class="o">{</span>

    <span class="k">default</span> <span class="n">Retrofit</span> <span class="nf">createRetrofit</span><span class="o">(</span><span class="n">String</span> <span class="n">baseUrl</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">useXml</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Retrofit</span><span class="o">.</span><span class="na">Builder</span> <span class="n">builder</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Retrofit</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">baseUrl</span><span class="o">(</span><span class="n">baseUrl</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">useXml</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">builder</span><span class="o">.</span><span class="na">addConverterFactory</span><span class="o">(</span><span class="n">SimpleXmlConverterFactory</span><span class="o">.</span><span class="na">create</span><span class="o">());</span>
        <span class="o">}</span>
        <span class="n">builder</span><span class="o">.</span><span class="na">addConverterFactory</span><span class="o">(</span><span class="n">JacksonConverterFactory</span><span class="o">.</span><span class="na">create</span><span class="o">());</span>
        <span class="k">return</span> <span class="n">builder</span><span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="k">default</span> <span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">T</span> <span class="nf">executeCall</span><span class="o">(</span><span class="n">Supplier</span><span class="o">&lt;</span><span class="n">Call</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span> <span class="n">supplier</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">Call</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="n">call</span> <span class="o">=</span> <span class="n">supplier</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>
            <span class="k">return</span> <span class="n">call</span><span class="o">.</span><span class="na">execute</span><span class="o">().</span><span class="na">body</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="conclusion-1">Conclusion</h3>

<h4 id="drawbacks">Drawbacks</h4>

<p>We found quite annoying that there is no way with <code class="highlighter-rouge">CallFactory</code> to issue a synchronous call returning an object without having to use the <code class="highlighter-rouge">Call</code> object - as this can be done with Feign</p>

<p>It is also possible to create our own `CallAdapterFactory. Here is an example from Retrofit test source code:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></td><td class="code"><pre><span class="kd">static</span> <span class="kd">class</span> <span class="nc">DirectCallIOException</span> <span class="kd">extends</span> <span class="n">RuntimeException</span> <span class="o">{</span>
    <span class="n">DirectCallIOException</span><span class="o">(</span><span class="n">String</span> <span class="n">message</span><span class="o">,</span> <span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="kd">super</span><span class="o">(</span><span class="n">message</span><span class="o">,</span> <span class="n">e</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">static</span> <span class="kd">class</span> <span class="nc">DirectCallAdapterFactory</span> <span class="kd">extends</span> <span class="n">CallAdapter</span><span class="o">.</span><span class="na">Factory</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">CallAdapter</span><span class="o">&lt;?&gt;</span> <span class="n">get</span><span class="o">(</span><span class="kd">final</span> <span class="n">Type</span> <span class="n">returnType</span><span class="o">,</span> <span class="n">Annotation</span><span class="o">[]</span> <span class="n">annotations</span><span class="o">,</span> <span class="n">Retrofit</span> <span class="n">retrofit</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">CallAdapter</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;()</span> <span class="o">{</span>
            <span class="nd">@Override</span> <span class="kd">public</span> <span class="n">Type</span> <span class="nf">responseType</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">returnType</span><span class="o">;</span>
            <span class="o">}</span>

            <span class="nd">@Override</span> <span class="kd">public</span> <span class="n">Object</span> <span class="nf">adapt</span><span class="o">(</span><span class="n">Call</span> <span class="n">call</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">try</span> <span class="o">{</span>
                    <span class="k">return</span> <span class="n">call</span><span class="o">.</span><span class="na">execute</span><span class="o">().</span><span class="na">body</span><span class="o">();</span>
                <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                    <span class="k">throw</span> <span class="k">new</span> <span class="nf">DirectCallIOException</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(),</span> <span class="n">e</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">};</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>This enforces the handling of exceptions of type <code class="highlighter-rouge">DirectCallIOException</code>.</p>

<p>Another pain point encountered with Retrofit is to have to explicitly catch the <code class="highlighter-rouge">IOException</code> that can raise from method calls.
Maybe Retrofit could provide exception management in a Feign fashion?
We will find this out during the next part.</p>

<p>The last drawback we found, Retrofit requires several dependencies to run: <a href="http://square.github.io/okhttp/">OkHttp</a> and at least 1 <em>converter</em> which makes the size of the executable much larger that the one generated with Feign (1.5Mo vs 0.5Mo).</p>

<h4 id="benefits">Benefits</h4>

<p>Retrofit is developer friendly. Having the main converters available out of the box is very handy.</p>

<p>Retrofit has its own annotations avoiding typical <em>typo</em>, which is a good thing. Even if Feign has improved a lot on error messages management, we still prefer the way it has been designed by the Retrofit team.</p>

</article>

      <div class="authors">
        
          <div class="author">
            <a href="https://twitter.com/EmmanuelVinas" rel="author">
              <img src="https://lh3.googleusercontent.com/-PPNaC_SZen8/AAAAAAAAAAI/AAAAAAAARt8/lRnd47vDjyM/s46-c-k-no/photo.jpg" alt="Emmanuel Vinas">
              <span>Emmanuel Vinas</span>
            </a>
          </div>
        
          <div class="author">
            <a href="https://twitter.com/ilaborie" rel="author">
              <img src="http://www.gravatar.com/avatar/5870075cc4934bb7c32f2a6c56cc4f8d?s=48" alt="Igor Laborie">
              <span>Igor Laborie</span>
            </a>
          </div>
        
          <div class="author">
            <a href="https://twitter.com/brunochauvet" rel="author">
              <img src="https://pbs.twimg.com/profile_images/504967695154954240/UlbmZ2uh_400x400.jpeg" alt="Bruno Chauvet">
              <span>Bruno Chauvet</span>
            </a>
          </div>
        
      </div>
    </section>
    
    
    <section class="comment">
      <div id="disqus_thread"></div>
      <script>
      var disqus_config = function () {
          this.page.url = "http://www.monkeypatch.io/2016/08/09/MKTD-1-feign-vs-retrofit-&-58;-1-getting-started.html";  // Replace PAGE_URL with your page's canonical URL variable
          this.page.identifier = "/2016/08/09/MKTD-1-feign-vs-retrofit-&-58;-1-getting-started.html"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
      };
      (function() { // DON'T EDIT BELOW THIS LINE
          var d = document, s = d.createElement('script');
          s.src = '//monkeypatchblog.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
      })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </section>
    
    <footer class="top">
    <div>
      <h3>Rester en contact</h3>
      <p>
        <a class="contact" href="contact">
          <i class="fa fa-map-marker" aria-hidden="true"></i>
          <img src="/public/images/icons/Toulouse.png" alt="Toulouse">
        </a>
      </p>
      <p>
        <i class="fa fa-envelope-o" aria-hidden="true"></i>
        <a class="mail" href="mailto:contact@monkeypatch.io">contact@monkeypatch.io</a>
      </p>
    </div>
    <div class="social-network">
      <h3>Réseaux sociaux</h3>
      <ul class="social">
        <li>
          <a href="https://twitter.com/monkeypatch_io">
            <i class="fa fa-twitter" aria-hidden="true"></i>
          </a>
        </li>
        <li>
          <a href="https://www.linkedin.com/company/monkeypatch-io">
            <i class="fa fa-linkedin" aria-hidden="true"></i>
          </a>
        </li>
      </ul>
    </div>
  </div>
</footer>

<footer class="bottom">
  <div>
    Copyright @ 2016 MonkeyPatch -<a href="/terms">Termes et conditions</a>
  </div>
  <div>
    Made with <i class="fa fa-heart" aria-hidden="true"></i> In Toulouse
  </div>
  <a class="goToTop" href="#top">
    <i class="fa fa-caret-up" aria-hidden="true"></i>
  </a>
</footer>

  </main>
  <!-- Google Tag Manager -->
  <noscript>
    <iframe src="//www.googletagmanager.com/ns.html?id=GTM-KGGFWH" height="0" width="0" style="display:none;visibility:hidden"></iframe>
  </noscript>
  <script>
    (function(w, d, s, l, i) {
      w[l] = w[l] || [];
      w[l].push({
        'gtm.start': new Date().getTime(),
        event: 'gtm.js'
      });
      var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s),
        dl = l != 'dataLayer' ? '&l=' + l : '';
      j.async = true;
      j.src =
        '//www.googletagmanager.com/gtm.js?id=' + i + dl;
      f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-KGGFWH');
  </script>
  <!-- End Google Tag Manager -->
  <script src="/public/scripts/modernizr-custom.js"></script>
  <script>
document.addEventListener('DOMContentLoaded', function () {
  var i;
  var nav = document.querySelector('nav.index');
  var headers = document.querySelectorAll('article h1, article h2, article h3, article h4, article h5, article h6');

  var createNavHeader = function(id, type, text) {
    var link = document.createElement('a');
    link.textContent = text;
    link.setAttribute('href', '#' + id);

    var text = document.createElement(type);
    text.appendChild(link);
    return text;
  };
  var createHeaderLink = function(id, text) {
    var link = document.createElement('a');
    link.classList.add('anchor');
    link.textContent = text;
    link.setAttribute('href', '#' + id);
    return link;
  };

  var processHeader = function(header) {
    var id = header.id;
    var tag = header.tagName;
    var text = header.textContent;

    var navHeader = createNavHeader(id, tag, text);
    nav.appendChild(navHeader);

    var headerLink = createHeaderLink(id, text);
    header.removeChild(header.firstChild);
    header.appendChild(headerLink); 
  }

  for (i = 0; i < headers.length; i++) {
    processHeader(headers[i]);
  }
});
  </script>
  <!-- Share with Twitter -->
  <script>window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);
 
  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };
 
  return t;
}(document, "script", "twitter-wjs"));</script>
</body>
</html>




