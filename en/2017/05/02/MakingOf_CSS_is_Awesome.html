<!DOCTYPE html>
<!--  lastBuildDate : Sun, 16 Dec 2018 13:34:23 +0000 -->
<html>
<head>
  
  
  <title>Making Of 'CSS is Awesome !'</title>
  
  <!-- Meta -->
  <meta charset="utf-8">
  <meta http-equiv="content-language" content="en" />
  <meta name="language" content="en" />
  <!-- Google site verification -->
  <meta name="google-site-verification" content="Gq_ytzUtfYn95WsiH66e4Lfb8zANT-LUwD8JgH9xXdw" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="keywords" content="Expertise informatique, Dévelopement informatique" />

  <!-- RSS feed -->
  <link rel="alternate" type="application/rss+xml" title=" RSS Feed" href="http://www.monkeypatch.io/blog/feed.xml" />

  <!-- SEO -->
  <meta property="og:title" content="Making Of 'CSS is Awesome !'" />

  
  <meta property="og:description" content="Introduction

Depuis quelque temps, j’avais l’idée de faire une présentation sur le CSS, mon objectif était de redorer le blason de cette technologie souvent crainte et sous-estimée par de trop nombreux développeurs. J’ai profité du CFP de DevoxxFR pour me jeter à l’eau.
En plus de mon appétance pour la transmission, j’aime bien faire des talks car ça me pousse à aller plus loin sur le sujet que je présente. Pour celle-ci, je me suis donné comme défi de faire la présentation en HTML/CSS sans JavaScript dans les slides. Cet article présente donc le résultat de ce défi.

" />
  <meta name="description" content="Introduction

Depuis quelque temps, j’avais l’idée de faire une présentation sur le CSS, mon objectif était de redorer le blason de cette technologie souvent crainte et sous-estimée par de trop nombreux développeurs. J’ai profité du CFP de DevoxxFR pour me jeter à l’eau.
En plus de mon appétance pour la transmission, j’aime bien faire des talks car ça me pousse à aller plus loin sur le sujet que je présente. Pour celle-ci, je me suis donné comme défi de faire la présentation en HTML/CSS sans JavaScript dans les slides. Cet article présente donc le résultat de ce défi.

" />
  
  
  
    <meta name="author" content="Emmanuel Vinas">
    <link rel="author" href="https://plus.google.com/+vinasemmanuel"/>
    
      <link rel="publisher" href="https://plus.google.com/+vinasemmanuel"/>
    
  
    <meta name="author" content="Igor Laborie">
    <link rel="author" href="https://plus.google.com/+IgorLaborie"/>
    
      <link rel="publisher" href="https://plus.google.com/+IgorLaborie"/>
    
  
    <meta name="author" content="Bruno Chauvet">
    <link rel="author" href="https://plus.google.com/"/>
    
      <link rel="publisher" href="https://plus.google.com/"/>
    
  
    <meta name="author" content="Arnaud bos">
    <link rel="author" href="https://plus.google.com/"/>
    
      <link rel="publisher" href="https://plus.google.com/"/>
    
  
    <meta name="author" content="Matthieu Caylet">
    <link rel="author" href="https://plus.google.com/"/>
    
      <link rel="publisher" href="https://plus.google.com/"/>
    
  
    <meta name="author" content="Alteanne Fernandez">
    <link rel="author" href="https://plus.google.com/"/>
    
      <link rel="publisher" href="https://plus.google.com/"/>
    
  
    <meta name="author" content="Guillaume Andrieu">
    <link rel="author" href="https://plus.google.com/"/>
    
      <link rel="publisher" href="https://plus.google.com/"/>
    
  
    <meta name="author" content="Logan Mauzaize">
    <link rel="author" href="https://plus.google.com/"/>
    
      <link rel="publisher" href="https://plus.google.com/"/>
    
  
    <meta name="author" content="Alexandre Delattre">
    <link rel="author" href="https://plus.google.com/"/>
    
      <link rel="publisher" href="https://plus.google.com/"/>
    
  

  
    <meta property="og:type" content="article"/>
    <meta property="og:article:published_time" content="2017-05-02T00:00:00+00:00">
    
      <meta property="og:article:author:username" content="Emmanuel Vinas">
    
      <meta property="og:article:author:username" content="Igor Laborie">
    
      <meta property="og:article:author:username" content="Bruno Chauvet">
    
      <meta property="og:article:author:username" content="Arnaud bos">
    
      <meta property="og:article:author:username" content="Matthieu Caylet">
    
      <meta property="og:article:author:username" content="Alteanne Fernandez">
    
      <meta property="og:article:author:username" content="Guillaume Andrieu">
    
      <meta property="og:article:author:username" content="Logan Mauzaize">
    
      <meta property="og:article:author:username" content="Alexandre Delattre">
    
    
    <meta property="og:article:tag" content="CSS">
    
    <meta property="og:article:tag" content="Devoxx">
    
    <meta property="og:article:tag" content="MiXiT">
    
    <meta property="og:article:tag" content="NodeJS">
    
    <meta property="og:article:tag" content="TypeScript">
    
  
  
  
  <meta property="og:image" content="http://www.monkeypatch.io/public/images/logos/logo-mkp-head-blue-x126.png"/>

  <meta property="og:url" content="http://www.monkeypatch.io/2017/05/02/MakingOf_CSS_is_Awesome.html"/>
  <meta property="og:site_name" content="MonkeyPatch"/>
  
  <!-- Twitter tags -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@MonkeyPatch_io" />
  <meta name="twitter:url" content="http://www.monkeypatch.io/2017/05/02/MakingOf_CSS_is_Awesome.html">
  <meta name="twitter:title" content="Making Of 'CSS is Awesome !'">
  <meta name="twitter:description" content="Introduction

Depuis quelque temps, j’avais l’idée de faire une présentation sur le CSS, mon objectif était de redorer le blason de cette technologie souvent crainte et sous-estimée par de trop nombreux développeurs. J’ai profité du CFP de DevoxxFR pour me jeter à l’eau.
En plus de mon appétance pour la transmission, j’aime bien faire des talks car ça me pousse à aller plus loin sur le sujet que je présente. Pour celle-ci, je me suis donné comme défi de faire la présentation en HTML/CSS sans JavaScript dans les slides. Cet article présente donc le résultat de ce défi.

">
  <meta name="twitter:image" content="http://www.monkeypatch.io/public/images/logos/logo-mkp-head-blue-x126.png">

  <!-- Lang --> 
  <link rel="alternate" hreflang="en" href="http://www.monkeypatch.io/en/index" />
  <link rel="alternate" hreflang="fr" href="http://www.monkeypatch.io/index" />
  
  <meta property="og:locale:alternate" content="fr_FR"/>
  <meta property="og:locale" content="en_US"/>
  

  <link rel="shortcut icon" href="favicon.ico">
  
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700" rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">

  <!-- Style -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
  <link id="theme-style" rel="stylesheet" href="/css/main.css">

 <script type="application/ld+json">
  {
    "@context": "http://schema.org",
    
      "@type": "BlogPosting", // 
      "mainEntityOfPage": "http://www.monkeypatch.io/2017/05/02/MakingOf_CSS_is_Awesome.html", 
    
    "author": [
      
      { "@type": "Person", "name": "Emmanuel Vinas" },
      
      { "@type": "Person", "name": "Igor Laborie" },
      
      { "@type": "Person", "name": "Bruno Chauvet" },
      
      { "@type": "Person", "name": "Arnaud bos" },
      
      { "@type": "Person", "name": "Matthieu Caylet" },
      
      { "@type": "Person", "name": "Alteanne Fernandez" },
      
      { "@type": "Person", "name": "Guillaume Andrieu" },
      
      { "@type": "Person", "name": "Logan Mauzaize" },
      
      { "@type": "Person", "name": "Alexandre Delattre" }
      
    ],
    "name": "MonkeyPatch",
    "headline": "Making Of 'CSS is Awesome !'",
    "image": "http://www.monkeypatch.io/public/images/logos/logo-mkp-head-blue-x126.png",
    
      "datePublished": "2017-05-02T00:00:00+00:00",
      "dateModified": "2017-05-02T00:00:00+00:00",
      "datePublished": "2017-05-02T00:00:00+00:00",
    
    "publisher": {
      "@type": "Organization",
      "name": "MonkeyPatch",
      "logo": "http://www.monkeypatch.io/public/images/logos/logo-mkp-blue-x256.png",
      "sameAs": [
        "https://twitter.com/monkeypatch_io","https://www.linkedin.com/company/monkeypatch-io"
      ]
    },
    "description": "Société de conseil et d'expertise en informatique spécialisée dans les nouvelles technologies.",
    "url": "http://www.monkeypatch.io/2017/05/02/MakingOf_CSS_is_Awesome.html"
  }
</script>
</head>

<body class="post">
  <header>
  <div class="menu">
    <div class="logo">
      <a href="/en/index">
        <img alt="Monkey Patch" src="/public/images/logos/logo-monkey.svg">
      </a>
    </div>
    
    <nav class="lang">
      <ul>
        <li class="active">
          <a href="en/2017/05/02/MakingOf_CSS_is_Awesome.html" >EN</a>
        </li>
        <li class="sep">|</li>
        <li class="">
          <a href="/2017/05/02/MakingOf_CSS_is_Awesome.html" >FR</a>
        </li>
      </ul>
    </nav>
    
    <nav class="menu">
      <ul>
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
            <li class="">
              <a href="/en/expert">Our expertise</a>
            </li>
          
        
          
            <li class="">
              <a href="/en/about">Our thoughts</a>
            </li>
          
        
          
            <li class="">
              <a href="/en/careers">Be a Monkey</a>
            </li>
          
        
          
            <li class="">
              <a href="/en/job">Our Jobs</a>
            </li>
          
        
          
            <li class="">
              <a href="/en/contact">Contact</a>
            </li>
          
        
        <li class="">
          <a href="/en/blog">Blog</a>
        </li>
      </ul>
    </nav>
      
    <nav class="hamburger">
      <label for="menu-hamburger">
        <i class="fa fa-bars" aria-hidden="true"></i>
      </label>
    </nav>
    
  </div>
  <input type="checkbox" id="menu-hamburger"/>
  <nav class="menu-hamburger">
     <ul>
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
            <li class="">
              <a href="/en/expert">Our expertise</a>
            </li>
          
        
          
            <li class="">
              <a href="/en/about">Our thoughts</a>
            </li>
          
        
          
            <li class="">
              <a href="/en/careers">Be a Monkey</a>
            </li>
          
        
          
            <li class="">
              <a href="/en/job">Our Jobs</a>
            </li>
          
        
          
            <li class="">
              <a href="/en/contact">Contact</a>
            </li>
          
        
        <li class="">
          <a href="/en/blog">Blog</a>
        </li>
      </ul>
      <ul class="lang">
        <li class="active">
          <a href="en/2017/05/02/MakingOf_CSS_is_Awesome.html" >EN</a>
        </li>
        <li class="">
          <a href="/2017/05/02/MakingOf_CSS_is_Awesome.html" >FR</a>
        </li>
      </ul>
  </nav>
</header>

  <main>
    <nav class="index"><!-- fill with JS --></nav>
    <section class="post">
      <h1 id="top">
        <span>Making Of 'CSS is Awesome !'</span>
        <div class="share">
          <a class="twitter-share-button"
            href="https://twitter.com/share"
            data-size="large"
            data-via="monkeypatch_io"
            data-text="Making Of 'CSS is Awesome !'"
            data-hashtags="CSS,Devoxx,MiXiT,NodeJS,TypeScript"
            >Tweet</a>
        </div>
      </h1>

      <span class="date">


  May 02, 2017

</span>

      <div class="tags">
        
          <span>CSS</span>
        
          <span>Devoxx</span>
        
          <span>MiXiT</span>
        
          <span>NodeJS</span>
        
          <span>TypeScript</span>
        
      </div>

      <article><h2 id="introduction">Introduction</h2>

<p>Depuis quelque temps, j’avais l’idée de faire une présentation sur le CSS, mon objectif était de redorer le blason de cette technologie souvent crainte et sous-estimée par de trop nombreux développeurs. J’ai profité du CFP de DevoxxFR pour me jeter à l’eau.
En plus de mon appétance pour la transmission, j’aime bien faire des talks car ça me pousse à aller plus loin sur le sujet que je présente. Pour celle-ci, je me suis donné comme défi de faire la présentation en HTML/CSS sans JavaScript dans les slides. Cet article présente donc le résultat de ce défi.</p>

<!--more-->

<blockquote>
  <p>J’ai fait cette présentation à <a href="https://www.youtube.com/watch?v=H8lICKucWL4">DevoxxFR (30 min.)</a>, et une version plus longue à <a href="https://vimeo.com/215621504">MiXiT (50 min.)</a>.</p>

  <p>Bien sûr, faire des présentations en HTML/CSS/JS n’est pas nouveau, certains sont trés bien faits comme :</p>
</blockquote>

<ul>
  <li><a href="http://lab.hakim.se/reveal-js/#/">reveal.js</a></li>
  <li><a href="http://markdalgleish.com/projects/bespoke.js/">bespoke.js</a></li>
  <li><a href="https://shwr.me/">Showr</a></li>
  <li><a href="https://leaverou.github.io/csss/#intro">CSSS</a></li>
</ul>

<p>J’avais déjà, dans le cadre d’une autre présentation, écrit mon propre framework en utilisant du CoffeeScript: <a href="https://github.com/ilaborie/prez">Prez</a>.</p>

<p>Pourquoi en écrire un nouveau, qui sera moins bien que ceux qui sont portés depuis plusieurs années ? La raison principale est que cela me permet de sortir de ma ‘zone de confort’, ce qui est toujours très enrichissant. En plus de cet aspect, cela me permet de creuser des sujets que je n’ai pas encore eu l’occasion d’étudier comme les ‘Custom Properties de CSS 4’ (aka les variables), et puis c’est fun.</p>

<blockquote>
  <p>Attention lors d’une présentation on peut (du moins on espère) contrôler l’environnement: navigateur, résolution, … Quand j’ai réalisé cette application je suis parti sur <a href="https://www.google.fr/chrome/browser/canary.html">Chrome Canary</a>, et j’ai constaté qu’il y avait des ralentissements sur les autres navigateurs quand j’utilisais les <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_variables">Custom Properties</a> :’(
A suivre…</p>
</blockquote>

<p><em>Le code que je décris ici est disponible dans <a href="https://github.com/ilaborie/css-awesome">Github</a>. À ce jour, il n’est pas destiné à devenir un nouveau framework. Il faudrait faire pas mal de ménage avant de pouvoir en faire quelque chose d’intéressant.</em></p>

<h2 id="comment-afficher-et-animer-les-slides-">Comment afficher et animer les slides ?</h2>

<h3 id="structure-de-base">Structure de base</h3>

<p>En gros voici la base de code HTML pour les slides :</p>

<div class="language-html highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12</pre></td><td class="code"><pre><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span><span class="c">&lt;!-- ... --&gt;</span><span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;main&gt;</span>
      <span class="nt">&lt;section</span> <span class="na">id=</span><span class="s">"cover"</span><span class="nt">&gt;</span><span class="c">&lt;!-- ... --&gt;</span><span class="nt">&lt;/section&gt;</span>
      <span class="nt">&lt;section</span> <span class="na">id=</span><span class="s">"slide1"</span><span class="nt">&gt;</span><span class="c">&lt;!-- ... --&gt;</span><span class="nt">&lt;/section&gt;</span>
      <span class="nt">&lt;section</span> <span class="na">id=</span><span class="s">"slide2"</span><span class="nt">&gt;</span><span class="c">&lt;!-- ... --&gt;</span><span class="nt">&lt;/section&gt;</span>
      <span class="nt">&lt;section</span> <span class="na">id=</span><span class="s">"slide3"</span><span class="nt">&gt;</span><span class="c">&lt;!-- ... --&gt;</span><span class="nt">&lt;/section&gt;</span>
      <span class="nt">&lt;section</span> <span class="na">id=</span><span class="s">"end"</span><span class="nt">&gt;</span><span class="c">&lt;!-- ... --&gt;</span><span class="nt">&lt;/section&gt;</span>
    <span class="nt">&lt;/main&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Chaque slide correspond à une <code class="highlighter-rouge">&lt;section&gt;</code>, pour faire simple on va donner la taille voulu pour chaque slide :</p>

<div class="language-css highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="nt">section</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">100vw</span><span class="p">;</span>  <span class="c">/* largeur maximun sans scroll */</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">100vh</span><span class="p">;</span> <span class="c">/* hauteur maximun sans scroll */</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<blockquote>
  <p>on peut utiliser l’unité <code class="highlighter-rouge">vmin</code> pour forcer un slide en 4/3 ou en 16/10 en mettant la largeur à <code class="highlighter-rouge">100vmin</code>, et la hauteur à <code class="highlighter-rouge">75vmin</code> pour le 4/3 ou <code class="highlighter-rouge">62.5vmin</code> pour le 16/10. On utilisera bien sur <code class="highlighter-rouge">flexbox</code> pour le centrage dans cette situation.</p>
</blockquote>

<h3 id="comment-animer-les-slides-">Comment animer les slides ?</h3>

<p>Le principe de navigation est le suivant :</p>

<ul>
  <li>les slides sont décalés sur la gauche avec <code class="highlighter-rouge">transform: translateX(-100vmax);</code> par défaut,</li>
  <li>le slide courant est remis dans l’axe avec <code class="highlighter-rouge">transform: translateX(0);</code>,</li>
  <li>les slides suivants sont décalés à droites dans l’axe avec <code class="highlighter-rouge">transform: translateX(100vmax);</code></li>
</ul>

<p>Une solution très simple pour identifier le slide courant c’est d’utiliser la pseudo classe <code class="highlighter-rouge">:target</code>. Le slide avec l’id <code class="highlighter-rouge">XXX</code> sera ciblé lorsque l’URL de notre navigateur sera du type <code class="highlighter-rouge">http://&lt;maprez&gt;/&lt;mapage&gt;.html#XXX</code>.</p>

<p>Ce qui ce traduit par le CSS suivant :</p>

<div class="language-css highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre><span class="nt">section</span> <span class="p">{</span>
 <span class="nl">transform</span><span class="p">:</span> <span class="n">translateX</span><span class="p">(</span><span class="m">-100vmax</span><span class="p">);</span>
<span class="p">}</span>
<span class="nt">section</span><span class="nd">:target</span> <span class="p">{</span> <span class="err">//</span> <span class="err">pseudo</span> <span class="py">classe</span> <span class="p">:</span><span class="n">target</span> 
 <span class="n">transform</span><span class="p">:</span> <span class="n">translateX</span><span class="p">(</span><span class="m">0</span><span class="p">);</span>
<span class="p">}</span>
<span class="nt">section</span> <span class="o">~</span> <span class="nt">section</span> <span class="p">{</span> <span class="err">//</span> <span class="err">selecteur</span> <span class="err">~</span> 
  <span class="nl">transform</span><span class="p">:</span> <span class="n">translateX</span><span class="p">(</span><span class="m">-100vmax</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Et bien sûr, on ajoute une petite transition comme <code class="highlighter-rouge">transition: transform .8s ease-in-out;</code>.</p>

<p>Pour ceux qui on encore du mal avec les selecteurs CSS, le <code class="highlighter-rouge">~</code> c’est le selecteur des <em>siblings</em>. Voir <a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/Introduction_to_CSS/Simple_selectors#Combinators">Simple selectors - Combinators</a></p>

<h3 id="comment-changer-de-slides-">Comment changer de slides ?</h3>

<p>Pour cela il suffit d’un lien qui va sur le slide avec l’id qui correspond au slide souhaité.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></td><td class="code"><pre><span class="nt">&lt;main&gt;</span>
  <span class="nt">&lt;section</span> <span class="na">id=</span><span class="s">"cover"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- ... --&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"next"</span> <span class="na">href=</span><span class="s">"#slide1"</span><span class="nt">&gt;&lt;/a&gt;</span>
  <span class="nt">&lt;/section&gt;</span>
  <span class="nt">&lt;section</span> <span class="na">id=</span><span class="s">"slide1"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"previous"</span> <span class="na">href=</span><span class="s">"#cover"</span><span class="nt">&gt;&lt;/a&gt;</span>
    <span class="c">&lt;!-- ... --&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"next"</span> <span class="na">href=</span><span class="s">"#slide2"</span><span class="nt">&gt;&lt;/a&gt;</span>
  <span class="nt">&lt;/section&gt;</span>
  <span class="nt">&lt;section</span> <span class="na">id=</span><span class="s">"slide2"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"previous"</span> <span class="na">href=</span><span class="s">"#slide1"</span><span class="nt">&gt;&lt;/a&gt;</span>
    <span class="c">&lt;!-- ... --&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"next"</span> <span class="na">href=</span><span class="s">"#slide3"</span><span class="nt">&gt;&lt;/a&gt;</span>
  <span class="nt">&lt;/section&gt;</span>
  <span class="nt">&lt;section</span> <span class="na">id=</span><span class="s">"slide3"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"previous"</span> <span class="na">href=</span><span class="s">"#slide2"</span><span class="nt">&gt;&lt;/a&gt;</span>
    <span class="c">&lt;!-- ... --&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"next"</span> <span class="na">href=</span><span class="s">"#end"</span><span class="nt">&gt;&lt;/a&gt;</span>
  <span class="nt">&lt;/section&gt;</span>
  <span class="nt">&lt;section</span> <span class="na">id=</span><span class="s">"end"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"previous"</span> <span class="na">href=</span><span class="s">"#slide3"</span><span class="nt">&gt;&lt;/a&gt;</span>
    <span class="c">&lt;!-- ... --&gt;</span>
  <span class="nt">&lt;/section&gt;</span>
<span class="nt">&lt;/main&gt;</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Ensuite on peut passer au CSS pour rendre ça sympa :</p>

<div class="language-css highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></td><td class="code"><pre><span class="nt">section</span> <span class="nt">a</span><span class="nc">.previous</span><span class="o">,</span> <span class="nt">section</span> <span class="nt">a</span><span class="nc">.next</span> <span class="p">{</span>
  <span class="nl">position</span><span class="p">:</span> <span class="nb">fixed</span><span class="p">;</span>
  <span class="nl">top</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">5vw</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="m">100vh</span><span class="p">;</span>
  <span class="nl">font-size</span><span class="p">:</span> <span class="m">25vh</span><span class="p">;</span>
  <span class="nl">color</span><span class="p">:</span> <span class="m">#000</span><span class="p">;</span>
  <span class="nl">display</span><span class="p">:</span> <span class="n">flex</span><span class="p">;</span>
  <span class="nl">align-items</span><span class="p">:</span> <span class="nb">center</span><span class="p">;</span>
  <span class="nl">text-decoration</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">section</span> <span class="nt">a</span><span class="nc">.previous</span> <span class="p">{</span>
  <span class="nl">left</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">section</span> <span class="nt">a</span><span class="nc">.previous</span><span class="nd">::before</span> <span class="p">{</span>
  <span class="nl">content</span><span class="p">:</span> <span class="s2">'&lt;'</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">section</span> <span class="nt">a</span><span class="nc">.next</span> <span class="p">{</span>
  <span class="nl">left</span><span class="p">:</span> <span class="m">95vw</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">section</span> <span class="nt">a</span><span class="nc">.next</span><span class="nd">::before</span> <span class="p">{</span>
  <span class="nl">content</span><span class="p">:</span> <span class="s2">'&gt;'</span><span class="p">;</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p data-height="342" data-theme-id="0" data-slug-hash="wJbogy" data-default-tab="result" data-user="ilaborie" data-embed-version="2" data-pen-title="slides-css" class="codepen">See the Pen <a href="https://codepen.io/ilaborie/pen/wJbogy/">slides-css</a> by igor (<a href="http://codepen.io/ilaborie">@ilaborie</a>) on <a href="http://codepen.io">CodePen</a>.</p>

<blockquote>
  <p>Il y a d’autres solutions alternatives pour faire un système de slides, comme un mécanisme avec des “radio boutons” et le <code class="highlighter-rouge">:checked</code> pour remplacer le <code class="highlighter-rouge">:target</code>, ou bien laisser le scroll horizontal, et ne pas faire de translation.</p>
</blockquote>

<h3 id="bonus--numéro-du-slide">Bonus : Numéro du slide</h3>

<p>Pour ajouter une numéroration sur chaque slide, on peut utiliser un pseudo-élément sur les <code class="highlighter-rouge">&lt;section&gt;</code>, avec un positionnement relatif. C’est l’occasion d’utiliser les <a href="https://developer.mozilla.org/fr/docs/Web/CSS/Compteurs_CSS">compteurs CSS</a> :</p>

<div class="language-css highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="nt">section</span><span class="nd">::after</span> <span class="p">{</span>
  <span class="nl">counter-increment</span><span class="p">:</span> <span class="n">section</span><span class="p">;</span>
  <span class="nl">content</span><span class="p">:</span> <span class="s2">'# '</span> <span class="n">counter</span><span class="p">(</span><span class="n">section</span><span class="p">);</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Il nous reste ensuite le <code class="highlighter-rouge">::before</code> pour afficher une barre avec les logos, les hashtags, …</p>

<h3 id="bonus--navigation-rapide">Bonus : navigation rapide</h3>

<p>Pour naviguer rapidement entre les slides, on peut simplement créer une barre de navigation que l’on peut fixer en bas ou en haut.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7</pre></td><td class="code"><pre><span class="nt">&lt;nav&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"#cover"</span><span class="nt">&gt;&lt;/a&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"#slide1"</span><span class="nt">&gt;&lt;/a&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"#slide2"</span><span class="nt">&gt;&lt;/a&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"#slide3"</span><span class="nt">&gt;&lt;/a&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"#end"</span><span class="nt">&gt;&lt;/a&gt;</span>
<span class="nt">&lt;/nav&gt;</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p data-height="265" data-theme-id="0" data-slug-hash="ZeNKWw" data-default-tab="result" data-user="ilaborie" data-embed-version="2" data-pen-title="slides-css extra nav" class="codepen">See the Pen <a href="https://codepen.io/ilaborie/pen/ZeNKWw/">slides-css extra nav</a> by igor (<a href="http://codepen.io/ilaborie">@ilaborie</a>) on <a href="http://codepen.io">CodePen</a>.</p>

<h2 id="comment-faire-du-live-edit-de-css-">Comment faire du live edit de CSS ?</h2>

<p>C’est la partie la plus ‘Hack’ du système, surtout ne pas utiliser ce principe dans du code qui peut aller en production.</p>

<p>Pour cela, on utilise la balise <code class="highlighter-rouge">&lt;style&gt;</code> avec l’attribut <code class="highlighter-rouge">contenteditable</code>, et ensuite il faut bricoler le style pour rendre ça visible.</p>

<p data-height="265" data-theme-id="0" data-slug-hash="BWgBeV" data-default-tab="result" data-user="ilaborie" data-embed-version="2" data-pen-title="pur CSS Live Edit" class="codepen">See the Pen <a href="https://codepen.io/ilaborie/pen/BWgBeV/">pur CSS Live Edit</a> by igor (<a href="http://codepen.io/ilaborie">@ilaborie</a>) on <a href="http://codepen.io">CodePen</a>.</p>

<blockquote>
  <p>Notez qu’il est préférable de faire du <a href="https://developer.mozilla.org/fr/docs/Web/API/Document/designMode">designMode</a> plutôt que du <code class="highlighter-rouge">contenteditable</code>. Mais cela nécessitait d’avoir du JavaScript, et mon objectif était de ne pas en faire.</p>
</blockquote>

<h2 id="produire-du-pdf">Produire du PDF</h2>

<p>Les slides en HTML c’est bien, mais on est parfois obliger de produire un PDF correspondant. Pour cela, j’ai créé une présentation spécialisée avec un CSS pour le <code class="highlighter-rouge">media print</code>. Ensuite on peut passer par la boite de l’impression pour générer un PDF correspondant.
Attention si vous ne prévoyez pas cette fonctionnalité assez tôt vous risquez de passer beaucoup de temps pour mettre au point un look raisonnable. Chrome. La prochaine fois je ferai plus attention…</p>

<p>Enfin le souci qu’il reste c’est que le live-edit ça rends pas terrible sur du PDF…</p>

<h2 id="build-system">Build system</h2>

<p>Ce mécanisme de slide a un gros défaut, il faut systématiquement ajouter les liens before/next sur chaque slide, et penser à maintenir les identifiants. Cela peut devenir vraiement lourd lorsqu’on ajoute/supprime/déplace un slide.</p>

<p>Et puis il faut quand même trouver un endroit pour faire du TypeScript et du NodeJS…
Donc, l’idée est de construire automatiquement le fichier HTML en aggrégeant des fichiers qui correspondent à chaque slide.</p>

<h3 id="nodejs-et-tooling">NodeJS et Tooling</h3>

<p>Pour le mécanisme de construction, on va devoir faire des opérations sur les fichiers et répertoires, pour cela j’utilise <code class="highlighter-rouge">mkdirp</code> pour faire l’équivalent du <code class="highlighter-rouge">mkdir -p</code> et <code class="highlighter-rouge">rimraf</code> pour <code class="highlighter-rouge">rm -rf</code> tout en étant compatible avec les plateformes qui ne supportent pas (encore) ces commandes.</p>

<p>Pour le reste des opérations, on va utiliser les modules <code class="highlighter-rouge">fs</code> et <code class="highlighter-rouge">path</code> de NodeJS pour les autres opérations sur le file system. J’ai choisi de ‘promisifier’ ces API, mais on aurait aussi pu utiliser <a href="http://bluebirdjs.com/docs/getting-started.html">bluebird</a>.</p>

<p>Voici un exemple avec <code class="highlighter-rouge">readFile</code></p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="k">export</span> <span class="kd">const</span> <span class="nx">readFile</span> <span class="o">=</span> <span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">encoding</span> <span class="o">=</span> <span class="s1">'utf8'</span><span class="p">)</span><span class="err">:</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="kr">string</span><span class="o">&gt;</span> <span class="o">=&gt;</span>
  <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span>
      <span class="nx">fs</span><span class="p">.</span><span class="nx">readFile</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">encoding</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">err</span> <span class="p">?</span> <span class="nx">reject</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">:</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">data</span><span class="p">)));</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Pour le templating, il existe déjà plein de solutions en JavaScript, dans ce cas j’ai utilisé la solution basique : le templating de ES6. Par exemple, pour construire ma page, j’utilise le code suivant :</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21</pre></td><td class="code"><pre><span class="k">export</span> <span class="kd">const</span> <span class="nx">html</span> <span class="o">=</span> <span class="p">({</span><span class="nx">body</span><span class="p">,</span> <span class="nx">slides</span><span class="p">,</span> <span class="nx">title</span> <span class="o">=</span> <span class="s1">'A Title'</span><span class="p">,</span> <span class="nx">key</span> <span class="o">=</span> <span class="s1">'index'</span><span class="p">})</span><span class="err">:</span> <span class="kr">string</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">nav</span> <span class="o">=</span> <span class="nx">slides</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">slide</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="err">`</span><span class="o">&lt;</span><span class="nx">a</span> <span class="nx">href</span><span class="o">=</span><span class="s2">"#${slide.id}"</span> <span class="nx">title</span><span class="o">=</span><span class="s2">"${slide.id}"</span><span class="o">&gt;</span><span class="nx">$</span><span class="p">{</span><span class="nx">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/a&gt;`</span><span class="se">)</span><span class="err">;
</span>    <span class="k">return</span> <span class="err">`</span><span class="o">&lt;!</span><span class="nx">doctype</span> <span class="nx">html</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">html</span> <span class="nx">lang</span><span class="o">=</span><span class="s2">"en"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nx">head</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">meta</span> <span class="nx">charset</span><span class="o">=</span><span class="s2">"UTF-8"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">meta</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"viewport"</span>
          <span class="nx">content</span><span class="o">=</span><span class="s2">"width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">meta</span> <span class="nx">http</span><span class="o">-</span><span class="nx">equiv</span><span class="o">=</span><span class="s2">"X-UA-Compatible"</span> <span class="nx">content</span><span class="o">=</span><span class="s2">"ie=edge"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">title</span><span class="o">&gt;</span><span class="nx">$</span><span class="p">{</span><span class="nx">title</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/title</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">link</span> <span class="nx">href</span><span class="o">=</span><span class="s2">"https://fonts.googleapis.com/icon?family=Material+Icons"</span> <span class="nx">rel</span><span class="o">=</span><span class="s2">"stylesheet"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">link</span> <span class="nx">rel</span><span class="o">=</span><span class="s2">"stylesheet"</span> <span class="nx">href</span><span class="o">=</span><span class="s2">"index.css"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="sr">/head</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="nx">body</span> <span class="kr">class</span><span class="o">=</span><span class="s2">"${key}"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">div</span> <span class="kr">class</span><span class="o">=</span><span class="s2">"slides-nav"</span><span class="o">&gt;&lt;</span><span class="nx">nav</span><span class="o">&gt;</span><span class="nx">$</span><span class="p">{</span><span class="nx">nav</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">'\n'</span><span class="p">)}</span><span class="o">&lt;</span><span class="sr">/nav&gt;&lt;/</span><span class="nx">div</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">main</span><span class="o">&gt;</span>
        <span class="nx">$</span><span class="p">{</span><span class="nx">body</span><span class="p">}</span>
    <span class="o">&lt;</span><span class="sr">/main</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/body</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/html&gt;</span><span class="err">`
</span><span class="p">};</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Enfin, on peut tout brancher pour obtenir un code comme celui ci :</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre><span class="kd">const</span> <span class="nx">buildHtml</span> <span class="o">=</span> <span class="p">(</span><span class="nx">slidesDir</span><span class="p">,</span> <span class="nx">title</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">output</span><span class="p">)</span> <span class="o">=&gt;</span>
    <span class="nb">Promise</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">log</span><span class="p">(</span><span class="s1">'- Building HTML ...'</span><span class="p">))</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">slides</span><span class="p">(</span><span class="nx">slidesDir</span><span class="p">,</span> <span class="nx">key</span><span class="p">))</span> <span class="c1">// récuère la liste des slides</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">((</span><span class="nx">slides</span><span class="err">:</span> <span class="nx">Slide</span><span class="p">[])</span> <span class="o">=&gt;</span> <span class="p">({</span><span class="nx">slides</span><span class="p">,</span> <span class="na">contents</span><span class="p">:</span> <span class="nx">slides</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">slide</span><span class="p">)}))</span> <span class="c1">// construction du contenu</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(({</span><span class="nx">slides</span><span class="p">,</span> <span class="nx">contents</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">({</span><span class="nx">slides</span><span class="p">,</span> <span class="na">body</span><span class="p">:</span> <span class="nx">contents</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">sep</span><span class="p">)}))</span> <span class="c1">// aggreation</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(({</span><span class="nx">slides</span><span class="p">,</span> <span class="nx">body</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="nx">html</span><span class="p">({</span><span class="nx">body</span><span class="p">,</span> <span class="nx">slides</span><span class="p">,</span> <span class="nx">title</span><span class="p">,</span> <span class="nx">key</span><span class="p">}))</span> <span class="c1">// construction du HTML</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span> <span class="o">=&gt;</span> <span class="nx">writeFile</span><span class="p">(</span><span class="nx">output</span><span class="p">,</span> <span class="nx">data</span><span class="p">))</span> <span class="c1">// on écrit</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">log</span><span class="p">(</span><span class="err">`✅</span> <span class="nx">Write</span> <span class="nx">HTML</span> <span class="nx">$</span><span class="p">{</span><span class="nx">output</span><span class="p">}</span><span class="err">`</span><span class="p">))</span> <span class="c1">// Emoji rocks</span>
        <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="nx">error</span><span class="p">(</span><span class="err">`️</span><span class="nx">FAIL</span> <span class="nx">building</span> <span class="nx">HTML</span><span class="err">:</span> <span class="nx">$</span><span class="p">{</span><span class="nx">err</span><span class="p">}</span><span class="err">`</span><span class="p">));</span> <span class="c1">// Oops</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>À noter que depuis ES6 (ES2015), on peut utiliser la déconstruction, ce qui permet de faire des trucs sympas comme :</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="p">({</span><span class="nx">slides</span><span class="p">,</span> <span class="nx">contents</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">({</span><span class="nx">slides</span><span class="p">,</span> <span class="na">body</span><span class="p">:</span> <span class="nx">contents</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">sep</span><span class="p">)})</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>qui est équivalent au code suivant :</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre><span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">slides</span> <span class="o">=</span> <span class="nx">object</span><span class="p">.</span><span class="nx">slides</span><span class="p">;</span>
  <span class="kr">const</span> <span class="nx">contents</span> <span class="o">=</span> <span class="nx">object</span><span class="p">.</span><span class="nx">contents</span><span class="p">;</span>

  <span class="k">return</span> <span class="p">{</span>
    <span class="na">slides</span><span class="p">:</span> <span class="nx">slides</span><span class="p">,</span>
    <span class="na">body</span><span class="p">:</span> <span class="nx">contents</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">sep</span><span class="p">)</span>
  <span class="p">};</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="les-slides">Les Slides</h3>

<h4 id="extraction">Extraction</h4>

<p>On peut utiliser simplement les API du module <code class="highlighter-rouge">fs</code> de NodeJS pour lire le contenu d’un répertoire, le trier, …</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10</pre></td><td class="code"><pre><span class="k">export</span> <span class="kd">const</span> <span class="nx">slides</span> <span class="o">=</span> <span class="p">(</span><span class="nx">dir</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span><span class="err">:</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">Slide</span><span class="p">[]</span><span class="o">&gt;</span> <span class="o">=&gt;</span>
    <span class="nx">readDir</span><span class="p">(</span><span class="nx">dir</span><span class="p">)</span> <span class="c1">// tous les fichiers du répertoire</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">files</span> <span class="o">=&gt;</span> <span class="nx">files</span><span class="p">.</span><span class="nx">sort</span><span class="p">())</span> <span class="c1">// on trie (les slides sont préfixés par un numéro)</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">files</span> <span class="o">=&gt;</span> <span class="nx">files</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">onlySlide</span><span class="p">))</span> <span class="c1">// on passe une regex pour extraire l'id</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">matchesList</span> <span class="o">=&gt;</span> <span class="nx">matchesList</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">matches</span> <span class="o">=&gt;</span> <span class="nx">matches</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">))</span> <span class="c1">// on retire ce qui n'est pas un slide</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">matchesList</span> <span class="o">=&gt;</span> <span class="nx">matchesList</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">matches</span> <span class="o">=&gt;</span> <span class="nx">buildSlide</span><span class="p">(</span><span class="nx">dir</span><span class="p">,</span> <span class="nx">matches</span><span class="p">)))</span> <span class="c1">// construction du contenu</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">slidePromises</span> <span class="o">=&gt;</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">slidePromises</span><span class="p">))</span> <span class="c1">// Promise&lt;[]&gt; =&gt; Promise[]</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">slides</span> <span class="o">=&gt;</span> <span class="nx">slides</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">slide</span> <span class="o">=&gt;</span> <span class="nx">filterSlide</span><span class="p">(</span><span class="nx">slide</span><span class="p">,</span> <span class="nx">key</span><span class="p">)))</span> <span class="c1">// on filtre ceux qui correspondent à ma clef</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">slides</span> <span class="o">=&gt;</span> <span class="nx">slides</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">buildSlideNav</span><span class="p">))</span> <span class="c1">// on calcule les previous/next</span>
    <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="nx">error</span><span class="p">(</span><span class="err">`️</span><span class="nx">FAIL</span> <span class="nx">to</span> <span class="nx">read</span> <span class="nx">dir</span> <span class="nx">$</span><span class="p">{</span><span class="nx">dir</span><span class="p">}</span><span class="err">:</span> <span class="nx">$</span><span class="p">{</span><span class="nx">err</span><span class="p">}</span><span class="err">`</span><span class="p">));</span> <span class="c1">// Oops</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Comme je génère plusieurs présentations, et que certaines contiennent des slides différents, j’utilise des métadonnées pour faire un filtre avant de construire les références sur les slides précédents et suivants.</p>

<h4 id="contenu-dun-slide">Contenu d’un slide</h4>

<p>Après lecture du contenu du fichier, on extrait les éventuelles meta-données, ici rien de très important.
Le point intéressant dans cette partie, c’est que je veux pouvoir utiliser soit du markdown pour les slides simples, soit directement du HTML.
Il n’y a pas de besoins particuliers pour du HTML, par contre pour le markdown on va utiliser la bibliothèque <a href="https://github.com/chjj/marked">marked</a>. L’utilisation est très simple, et on peut facilement ajouter de quoi styliser les blocs de codes avec la colorisation syntaxique avec <a href="https://github.com/isagalaev/highlight.js">highlight.js</a></p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">marked</span> <span class="k">from</span> <span class="s1">'marked'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">highlightAuto</span><span class="p">}</span> <span class="k">from</span> <span class="s1">'highlight.js'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">highlight</span> <span class="o">=</span> <span class="nx">code</span> <span class="o">=&gt;</span> <span class="nx">highlightAuto</span><span class="p">(</span><span class="nx">code</span><span class="p">).</span><span class="nx">value</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">htmlContent</span> <span class="o">=</span> <span class="nx">marked</span><span class="p">(</span><span class="nx">markdownContent</span><span class="p">,</span> <span class="p">{</span><span class="nx">highlight</span><span class="p">});</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>Il suffira ensuite d’ajouter le style souhaité, par exemple j’ai utilisé <code class="highlighter-rouge">@import 'node_modules/highlight.js/styles/darcula';</code></p>

<h3 id="styles">Styles</h3>

<p>Pour générer le style j’ai fait du SCSS avec <a href="https://www.npmjs.com/package/node-sass">node-sass</a>, l’intégration est très facile aujourd’hui puisque on peut utiliser cette lib plutôt que du ruby.
J’utilise donc le nesting et les mixins, et il reste encore quelques variables. Mais j’ai privilégié les nouveautés de CSS comme les <a href="https://developer.mozilla.org/fr/docs/Web/CSS/--*">Custom properties</a>.</p>

<p>Pour assurer la portabilité du style, j’utilise le postprocesseur <a href="https://github.com/postcss/postcss">PostCSS</a> avec les plugins <a href="https://github.com/postcss/autoprefixer">autoprefixer</a>, <a href="https://github.com/postcss/postcss-custom-properties">postcss-custom-properties</a>  pour transpiler les customs properties, <a href="http://cssnano.co/">cssnano</a> pour minifier le code, et enfin <a href="https://github.com/borodean/postcss-assets">postcss-assets</a> qui nous permet d’automatiquement inliner les images en <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs">data-uri</a>.</p>

<p>Le code resemble donc à ça :</p>

<div class="language-typescript highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19</pre></td><td class="code"><pre><span class="kd">const</span> <span class="nx">scss</span> <span class="o">=</span> <span class="p">(</span><span class="nx">file</span><span class="p">)</span><span class="err">:</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="nx">sass</span><span class="p">.</span><span class="nx">Result</span><span class="o">&gt;</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nb">Promise</span><span class="p">((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">sass</span><span class="p">.</span><span class="nx">render</span><span class="p">({</span><span class="nx">file</span><span class="p">},</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">err</span> <span class="p">?</span> <span class="nx">reject</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">:</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">data</span><span class="p">))</span>
<span class="p">});</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">css</span> <span class="o">=</span> <span class="p">(</span><span class="nx">dir</span><span class="p">,</span> <span class="nx">minify</span> <span class="o">=</span> <span class="kc">false</span><span class="p">)</span><span class="err">:</span> <span class="nb">Promise</span><span class="o">&lt;</span><span class="kr">string</span><span class="o">&gt;</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">file</span> <span class="o">=</span> <span class="nx">join</span><span class="p">(</span><span class="nx">dir</span><span class="p">,</span> <span class="s1">'index.scss'</span><span class="p">);</span>
    <span class="kd">const</span> <span class="nx">plugins</span> <span class="o">=</span> <span class="p">[</span>
        <span class="nx">customProperties</span><span class="p">({</span><span class="na">preserve</span><span class="p">:</span> <span class="kc">true</span><span class="p">}),</span>
        <span class="nx">autoprefixer</span><span class="p">(),</span>
        <span class="nx">assets</span><span class="p">({</span><span class="na">basePath</span><span class="p">:</span> <span class="nx">dir</span><span class="p">})</span>
    <span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">minify</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">plugins</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">cssnano</span><span class="p">());</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">scss</span><span class="p">(</span><span class="nx">file</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">result</span> <span class="o">=&gt;</span> <span class="nx">postcss</span><span class="p">(</span><span class="nx">plugins</span><span class="p">).</span><span class="nx">process</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">css</span><span class="p">))</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">result</span> <span class="o">=&gt;</span> <span class="nx">result</span><span class="p">[</span><span class="s1">'content'</span><span class="p">])</span>
        <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">err</span> <span class="o">=&gt;</span> <span class="nx">error</span><span class="p">(</span><span class="err">`️</span><span class="nx">FAIL</span> <span class="nx">to</span> <span class="nx">create</span> <span class="nx">CSS</span> <span class="nx">$</span><span class="p">{</span><span class="nx">dir</span><span class="p">}:</span> <span class="nx">$</span><span class="p">{</span><span class="nx">err</span><span class="p">}</span><span class="err">`</span><span class="p">));</span>
<span class="p">};</span>
</pre></td></tr></tbody></table>
</div>
</div>

<h3 id="serveur-et-serveur-de-développement">Serveur et serveur de développement</h3>

<p>Techniquement, on peut ouvrir la présentation avec le protocle <code class="highlighter-rouge">file://</code>, mais comme j’ai quelques liens externes, il faut utiliser le protocole <code class="highlighter-rouge">http://</code>. La solution la plus simple qui existe est d’utiliser python avec <code class="highlighter-rouge">python -m SimpleHTTPServer</code>. Cependant, cette solution n’est pas très pratique pour du développement, une fois qu’on a pris goût au LiveReload c’est difficile de s’en passer. Je préfère utiliser <a href="https://github.com/johnpapa/lite-server">lite-server</a>, c’est super simple d’usage, et ça utilise <a href="https://www.browsersync.io/">BrowserSync</a> pour le LiveReload.</p>

<p>Les fichiers TypeScript peuvent être compilé en mode ‘watch’  avec  la commande <code class="highlighter-rouge">tsc -w</code>.
Pour reconstruire automatiquement les slides lors d’une modification, j’utilise <a href="https://nodemon.io/">nodemon</a>.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7</pre></td><td class="code"><pre><span class="s2">"scripts"</span><span class="err">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"clean"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rimraf js/ dist/"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lite-server"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"build:dev"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tsc &amp;&amp; node js/index.js"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"build"</span><span class="p">:</span><span class="w"> </span><span class="s2">"npm run clean &amp;&amp; tsc &amp;&amp; node js/index.js --minify"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"serve"</span><span class="p">:</span><span class="w"> </span><span class="s2">"npm run start &amp; tsc -w &amp; nodemon js/index.js"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table>
</div>
</div>

<p>Je préfère utiliser les fichiers de configuration pour nodemon :</p>

<div class="language-json highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre><span class="p">{</span><span class="w">
  </span><span class="nt">"verbose"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"delay"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nt">"watch"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"src/"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"js/"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"ext"</span><span class="p">:</span><span class="w"> </span><span class="s2">"scss png js svg html md"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table>
</div>
</div>

<p>et pour BrowserSync :</p>

<div class="language-json highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8</pre></td><td class="code"><pre><span class="p">{</span><span class="w">
  </span><span class="nt">"server"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"baseDir"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dist"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"directory"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"notify"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"open"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table>
</div>
</div>

<h3 id="comment-publier-dans-les-github-pages-">Comment publier dans les Github Pages ?</h3>

<p>Dans ce dernier point concernant les outils, je voulais utiliser les <a href="https://pages.github.com/">pages github</a> pour publier les slides.
Rien de plus simple avec <a href="https://github.com/tschaub/gh-pages">gh-pages</a> il suffit de lancer la commande <code class="highlighter-rouge">gh-pages --dist dist/</code>.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Si vous voulez voir jusqu’où on peut aller en HTML/CSS, y compris dans les emails, je vous recommande la présentation suivante: <a href="https://vimeo.com/181481382">Modern and interactive email</a>. Pour améliorer vos connaissances en CSS, je vous recommande chaudement le livre (et les présentations) <a href="https://www.amazon.fr/CSS-Secrets-Lea-Verou/dp/1449372635">CSS Secret</a> de <a href="http://lea.verou.me/">Lea Verou</a>.</p>

<p>Au delà du CSS qui est si vaste que l’on peut y passer des années pour approfondir, je me suis beaucoup amusé à construire ces slides. L’écosystème NodeJS est immense, parfois inégal mais on y trouve à peu près tout ce que l’on veut. L’ES2015 (et plus) et TypeScript sont véritablement sympas, c’est aussi plus accessible maintenant pour les développeurs Java, attention toutefois le JavaScript peut être piégeux quand il est mal maîtrisé.</p>

<p>Pour apprendre, il faut sortir de sa zone de confort, les sides-projects sont idéaux pour cela. J’ai eu l’occasion d’échanger avec <a href="https://twitter.com/pixelastic">Tim Carry</a> à MiXiT, il est l’auteur de <a href="https://pixelastic.github.io/css-flags/">CSS Flags</a> dont le principe est de faire les drapeaux avec un seul <code class="highlighter-rouge">&lt;div&gt;</code> et du CSS, on retrouve le même principe dans ce (périlleux) exercice (Voir <a href="http://talks.pixelastic.com/slides/css-flags-mixit/#/">http://talks.pixelastic.com/slides/css-flags-mixit/#/</a>).</p>

<p>Have fun &amp; Hack !</p>

</article>

      <div class="authors">
        
          <div class="author">
            <a href="https://twitter.com/ilaborie" rel="author">
              <img src="http://www.gravatar.com/avatar/5870075cc4934bb7c32f2a6c56cc4f8d?s=48" alt="Igor Laborie">
              <span>Igor Laborie</span>
            </a>
          </div>
        
      </div>
    </section>

    
    <section class="comment">
      <div id="disqus_thread"></div>
      <script>
      var disqus_config = function () {
          this.page.url = "http://www.monkeypatch.io/en/2017/05/02/MakingOf_CSS_is_Awesome.html";  // Replace PAGE_URL with your page's canonical URL variable
          this.page.identifier = "/2017/05/02/MakingOf_CSS_is_Awesome.html"; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
      };
      (function() { // DON'T EDIT BELOW THIS LINE
          var d = document, s = d.createElement('script');
          s.src = '//monkeypatchblog.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
      })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </section>
    
    <footer class="top">
    <div>
      <h3>Get In Touch</h3>
      <p>
        <a class="contact" href="/encontact">
          <i class="fa fa-map-marker" aria-hidden="true"></i>
          <img src="/public/images/icons/Toulouse.png" alt="Toulouse">
        </a>
      </p>
      <p>
        <i class="fa fa-envelope-o" aria-hidden="true"></i>
        <a class="mail" href="mailto:contact@monkeypatch.io">contact@monkeypatch.io</a>
      </p>
    </div>
    <div class="social-network">
      <h3>Social Networks</h3>
      <ul class="social">
        <li>
          <a href="https://twitter.com/monkeypatch_io">
            <i class="fa fa-twitter" aria-hidden="true"></i>
          </a>
        </li>
        <li>
          <a href="https://www.linkedin.com/company/monkeypatch-io">
            <i class="fa fa-linkedin" aria-hidden="true"></i>
          </a>
        </li>
      </ul>
    </div>
  </div>
</footer>

<footer class="bottom">
  <div>
    Copyright @ 2016 MonkeyPatch -<a href="/en/terms">Terms and Conditions</a>
  </div>
  <div>
    Made with <i class="fa fa-heart" aria-hidden="true"></i> In Toulouse
  </div>
  <a class="goToTop" href="#top">
    <i class="fa fa-caret-up" aria-hidden="true"></i>
  </a>
</footer>

  </main>
  <!-- Google Tag Manager -->
  <noscript>
    <iframe src="//www.googletagmanager.com/ns.html?id=GTM-KGGFWH" height="0" width="0" style="display:none;visibility:hidden"></iframe>
  </noscript>
  <script>
    (function(w, d, s, l, i) {
      w[l] = w[l] || [];
      w[l].push({
        'gtm.start': new Date().getTime(),
        event: 'gtm.js'
      });
      var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s),
        dl = l != 'dataLayer' ? '&l=' + l : '';
      j.async = true;
      j.src =
        '//www.googletagmanager.com/gtm.js?id=' + i + dl;
      f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-KGGFWH');
  </script>
  <!-- End Google Tag Manager -->
  <script src="/public/scripts/modernizr-custom.js"></script>
  <script>
document.addEventListener('DOMContentLoaded', function () {
  var i;
  var nav = document.querySelector('nav.index');
  var headers = document.querySelectorAll('article h1, article h2, article h3, article h4, article h5, article h6');

  var createNavHeader = function(id, type, text) {
    var link = document.createElement('a');
    link.textContent = text;
    link.setAttribute('href', '#' + id);

    var text = document.createElement(type);
    text.appendChild(link);
    return text;
  };
  var createHeaderLink = function(id, text) {
    var link = document.createElement('a');
    link.classList.add('anchor');
    link.textContent = text;
    link.setAttribute('href', '#' + id);
    return link;
  };

  var processHeader = function(header) {
    var id = header.id;
    var tag = header.tagName;
    var text = header.textContent;

    var navHeader = createNavHeader(id, tag, text);
    nav.appendChild(navHeader);

    var headerLink = createHeaderLink(id, text);
    header.removeChild(header.firstChild);
    header.appendChild(headerLink);
  }

  for (i = 0; i < headers.length; i++) {
    processHeader(headers[i]);
  }
});
  </script>
  <!-- Share with Twitter -->
  <script>window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));</script>
</body>
</html>
